"use strict";var MVC=MVC||{};function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,s=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,s=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,s=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,s=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,s=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,s=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,s=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,s=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,s=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}MVC.Constants={},MVC.CONST=MVC.Constants,MVC.Constants.Events={},MVC.CONST.EV=MVC.Constants.Events,MVC.Templates={ObjectQueryStringFormatInvalidRoot:function(t){return['Object Query "string" property must be formatted to first include "[@]".'].join("\n")},DataSchemaMismatch:function(t){return["Data and Schema properties do not match."].join("\n")},DataFunctionInvalid:function(t){['Model Data property type "Function" is not valid.'].join("\n")},DataUndefined:function(t){["Model Data property undefined."].join("\n")},SchemaUndefined:function(t){['Model "Schema" undefined.'].join("\n")}},MVC.TMPL=MVC.Templates,MVC.Utils={},MVC.Utils.isArray=function(t){return Array.isArray(t)},MVC.Utils.isObject=function(t){return!Array.isArray(t)&&"object"===_typeof(t)},MVC.Utils.isEqualType=function(t,e){return t===e},MVC.Utils.typeOf=function(t){switch(_typeof(t)){case"object":return MVC.Utils.isArray(t)?"array":MVC.Utils.isObject(t)?"object":null===t?"null":void 0;case"string":case"number":case"boolean":case"undefined":case"function":return _typeof(t)}},MVC.Utils.addPropertiesToTargetObject=function(){var t;switch(arguments.length){case 2:var e=arguments[0];t=arguments[1];for(var n=0,r=Object.entries(e);n<r.length;n++){var i=_slicedToArray(r[n],2),s=i[0],o=i[1];t[s]=o}break;case 3:var a=arguments[0],l=arguments[1];(t=arguments[2])[a]=l}return t},MVC.Utils.objectQuery=function(t,e){var n=MVC.Utils.objectQuery.parseStringData(t,e);if(n[0].test("@"))return 1===n.length?[["@",e]]:(n=n.slice(1),MVC.Utils.objectQuery.parseContext(n,e));throw MVC.TMPL.ObjectQueryStringFormatInvalidRoot()},MVC.Utils.objectQuery.parseContext=function(t,e){return e=MVC.Utils.isObject(e)?Object.entries(e):e,t.reduce(function(t,e,n,r){var i=[],s=!0,o=!1,a=void 0;try{for(var l,u=t[Symbol.iterator]();!(s=(l=u.next()).done);s=!0){var c=_slicedToArray(l.value,2),f=c[0],h=c[1];e.test(f)&&(i=n===r.length-1?i.concat([[f,h]]):i.concat(Object.entries(h)))}}catch(t){o=!0,a=t}finally{try{s||null==u.return||u.return()}finally{if(o)throw a}}return t=i},e)},MVC.Utils.objectQuery.parseStringData=function(t,e){return t.split("][").map(function(t,e,n){var r;if(0===e&&(t="["===t[0]?t.split("").slice(1).join(""):t),e===n.length-1&&(t="]"===t[t.length-1]?t.split("").slice(0,-1).join(""):t),"/"===t[0]){switch((t=t.split("")).splice(0,1),t[t.length-1]){case"/":r="i";break;case")":r=t.splice(-3).slice(1).slice(0,-1)}t.splice(-1),t=t.join(""),t=new RegExp(t,r)}else r="i",t=new RegExp("^".concat(t,"$"),r);return t})},MVC.Utils.toggleEventsForTargetObjects=function(t,e,n,r){for(var i=0,s=Object.entries(e);i<s.length;i++){var o=_slicedToArray(s[i],2),a=o[0],l=o[1],u=a.split(" "),c=u[0],f=u[1],h=MVC.Utils.objectQuery(c,n),y=!0,_=!1,p=void 0;try{for(var b,d=h[Symbol.iterator]();!(y=(b=d.next()).done);y=!0){var g=_slicedToArray(b.value,2),v=(g[0],g[1]),m="on"===t?v instanceof NodeList||v instanceof HTMLElement?"addEventListener":"on":v instanceof NodeList||v instanceof HTMLElement?"removeEventListener":"off",C=MVC.Utils.objectQuery(l,r)[0][1];if(v instanceof NodeList){var k=!0,O=!1,w=void 0;try{for(var T,P=v[Symbol.iterator]();!(k=(T=P.next()).done);k=!0){T.value[m](f,C)}}catch(t){O=!0,w=t}finally{try{k||null==P.return||P.return()}finally{if(O)throw w}}}else HTMLElement,v[m](f,C)}}catch(t){_=!0,p=t}finally{try{y||null==d.return||d.return()}finally{if(_)throw p}}}},MVC.Utils.bindEventsToTargetObjects=function(){this.toggleEventsForTargetObjects.apply(this,["on"].concat(Array.prototype.slice.call(arguments)))},MVC.Utils.unbindEventsFromTargetObjects=function(){this.toggleEventsForTargetObjects.apply(this,["off"].concat(Array.prototype.slice.call(arguments)))},MVC.Utils.validateDataSchema=function(t,e){if(!e)throw MVC.TMPL;switch(MVC.Utils.typeOf(t)){case"array":var n=[];if(e="function"===MVC.Utils.typeOf(e)?e():e,MVC.Utils.isEqualType(MVC.Utils.typeOf(e),MVC.Utils.typeOf(n))){console.log(e.name);for(var r=0,i=Object.entries(t);r<i.length;r++){var s=_slicedToArray(i[r],2),o=(s[0],s[1]);n.push(this.validateDataSchema(o))}}return n;case"object":var a={};if(e="function"===MVC.Utils.typeOf(e)?e():e,MVC.Utils.isEqualType(MVC.Utils.typeOf(e),MVC.Utils.typeOf(a))){console.log(e.name);for(var l=0,u=Object.entries(t);l<u.length;l++){var c=_slicedToArray(u[l],2),f=c[0],h=c[1];a[f]=this.validateDataSchema(h,e[f])}}return a;case"string":case"number":case"boolean":if(e="function"===MVC.Utils.typeOf(e)?e():e,MVC.Utils.isEqualType(MVC.Utils.typeOf(e),MVC.Utils.typeOf(t)))return console.log(e.name),t;throw MVC.TMPL;case"null":if(MVC.Utils.isEqualType(MVC.Utils.typeOf(e),MVC.Utils.typeOf(t)))return t;break;case"undefined":case"function":throw MVC.TMPL}},MVC.Events=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"eventCallbacks",value:function(t){return this._events[t]||{}}},{key:"eventCallbackName",value:function(t){return t.name.length?t.name:"anonymousFunction"}},{key:"eventCallbackGroup",value:function(t,e){return t[e]||[]}},{key:"on",value:function(t,e){var n=this.eventCallbacks(t),r=this.eventCallbackName(e),i=this.eventCallbackGroup(n,r);i.push(e),n[r]=i,this._events[t]=n}},{key:"off",value:function(){switch(arguments.length){case 1:var t=arguments[0];delete this._events[t];break;case 2:t=arguments[0];var e=arguments[1],n=this.eventCallbackName(e);delete this._events[t][n]}}},{key:"emit",value:function(t,e){for(var n=this.eventCallbacks(t),r=0,i=Object.entries(n);r<i.length;r++){var s=_slicedToArray(i[r],2),o=(s[0],s[1]),a=!0,l=!1,u=void 0;try{for(var c,f=o[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var h=c.value,y=Object.values(arguments).splice(2);h.apply(void 0,[e].concat(_toConsumableArray(y)))}}catch(t){l=!0,u=t}finally{try{a||null==f.return||f.return()}finally{if(l)throw u}}}}},{key:"_events",get:function(){return this.events=this.events?this.events:{},this.events}}]),t}(),MVC.Channels=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"channel",value:function(t){return this._channels[t]=this._channels[t]?this._channels[t]:new MVC.Channels.Channel,this._channels[t]}},{key:"off",value:function(t){delete this._channels[t]}},{key:"_channels",get:function(){return this.channels||{}}}]),t}(),MVC.Channels.Channel=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"response",value:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e){if(!e)return this._responses[response];this._responses[t]=e})},{key:"request",value:function(t,e){if(this._responses[t])return this._responses[t](e)}},{key:"off",value:function(t){if(t)delete this._responses[t];else for(var e=0,n=Object.keys(this._responses);e<n.length;e++){var r=_slicedToArray(n[e],1)[0];delete this._responses[r]}}},{key:"_responses",get:function(){return this.responses||{}}}]),t}(),MVC.Base=function(t){function e(t,n,r){var i;return _classCallCheck(this,e),i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)),r&&(i._configuration=r),n&&(i._options=n),t&&(i._settings=t),i}return _inherits(e,t),_createClass(e,[{key:"_configuration",get:function(){return this.configuration=this.configuration?this.configuration:{},this.configuration},set:function(t){this.configuration=t}},{key:"_options",get:function(){return this.options=this.options?this.options:{},this.options},set:function(t){this.options=t}},{key:"_settings",get:function(){return this.settings=this.settings?this.settings:{},this.settings},set:function(t){this.settings=t}}]),e}(MVC.Events),MVC.Observer=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).addSettings(),t._observer.observe(t.target,t.options),t}return _inherits(e,t),_createClass(e,[{key:"addSettings",value:function(){Object.keys(this._settings).length&&(this._settings=settings,this._settings.context&&(this._context=this._settings.context),this._settings.target&&(this._target=this._settings.target instanceof NodeList?this._settings.target[0]:this._settings.target),this._settings.options&&(this._options=this._settings.options),this._settings.mutations&&(this._mutations=this._settings.mutations))}},{key:"observerCallback",value:function(t,e){for(var n=this,r=function(){var t=_slicedToArray(s[i],2),e=(t[0],t[1]);switch(e.type){case"childList":for(var r=0,o=["addedNodes","removedNodes"];r<o.length;r++){var a=o[r];if(e[a].length)for(var l=function(){var t=_slicedToArray(c[u],2),r=(t[0],t[1]),i=n.mutations.filter(function(t){return t.target===r})[0];i&&i.callback({mutation:i,mutationRecord:e})},u=0,c=Object.entries(e[a]);u<c.length;u++)l()}break;case"attributes":var f=n.mutations.filter(function(t){return t.name===e.type&&t.data===e.attributeName})[0];f&&f.callback({mutation:f,mutationRecord:e})}},i=0,s=Object.entries(t);i<s.length;i++)r()}},{key:"_context",get:function(){return this.context},set:function(t){this.context=t}},{key:"_target",get:function(){return this.target},set:function(t){this.target=t}},{key:"_options",get:function(){return this.options},set:function(t){this.options=t}},{key:"_observer",get:function(){return this.observer=this.observer?this.observer:new MutationObserver(this.observerCallback.bind(this)),this.observer}},{key:"_mutations",get:function(){return this.mutations=this.mutations?this.mutations:[],this.mutations},set:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=_slicedToArray(n[e],2),i=r[0],s=r[1],o=void 0,a=i.split(" "),l=MVC.Utils.objectQuery(a,this.context.ui),u=a[1],c=a[2];o={target:l,name:u,callback:s=s.match("@")?this.context.observerCallbacks[s.replace("@","")]:"string"==typeof s?MVC.Utils.objectQuery(s,window):s},c&&(o.data=c),this._mutations.push(o)}}}]),e}(MVC.Base),MVC.Service=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).addSettings(),t}return _inherits(e,t),_createClass(e,[{key:"addSettings",value:function(){Object.keys(this._settings).length&&(this._settings.type&&(this._type=this._settings.type),this._settings.url&&(this._url=this._settings.url),this._settings.data&&(this._data=this._settings.data||null),this._settings.headers&&(this._headers=this._settings.headers||[this._defaults.contentType]),this._settings.responseType&&(this._responseType=this._settings.responseType))}},{key:"newXHR",value:function(){var t=this;return new Promise(function(e,n){200===t._xhr.status&&t._xhr.abort(),t._xhr.open(t._type,t._url),t._xhr.onload=e,t._xhr.onerror=n,t._xhr.send(t._data)})}},{key:"_defaults",get:function(){return this.defaults||{contentType:{"Content-Type":"application/json"},responseType:"json"}}},{key:"_responseTypes",get:function(){return["","arraybuffer","blob","document","json","text"]}},{key:"_responseType",get:function(){return this.responseType},set:function(t){this._xhr.responseType=this._responseTypes.find(function(e){return e===t})||this._defaults.responseType}},{key:"_type",get:function(){return this.type},set:function(t){this.type=t}},{key:"_url",get:function(){return this.url},set:function(t){this.url=t}},{key:"_headers",get:function(){return this.headers||[]},set:function(t){this._headers.length=0;var e=!0,n=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var o=i.value;this._xhr.setRequestHeader({header:o}[0],{header:o}[1]),this._headers.push(o)}}catch(t){n=!0,r=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw r}}}},{key:"_xhr",get:function(){return this.xhr=this.xhr?this.xhr:new XMLHttpRequest,this.xhr}}]),e}(MVC.Base),MVC.Model=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).addSettings(),t}return _inherits(e,t),_createClass(e,[{key:"addSettings",value:function(){Object.keys(this._settings).length&&(this._settings.histiogram&&(this._histiogram=this._settings.histiogram),this._settings.data&&this.set(this._settings.data),this._settings.dataCallbacks&&(this._dataCallbacks=this._settings.dataCallbacks),this._settings.dataEvents&&(this._dataEvents=this._settings.dataEvents),this._settings.schema&&(this._schema=this._settings.schema),this._settings.defaults&&(this._defaults=this._settings.defaults))}},{key:"get",value:function(){var t=arguments[0];return this._data["_".concat(t)]}},{key:"set",value:function(){var t=this;switch(this._history=this.parse(),arguments.length){case 1:var e=Object.entries(arguments[0]);e.forEach(function(n,r){var i=_slicedToArray(n,2),s=i[0],o=i[1];0===r?t._isSetting=!0:r===e.length-1&&(t._isSetting=!1),t.setDataProperty(s,o)});break;case 2:var n=arguments[0],r=arguments[1];this.setDataProperty(n,r);break;case 3:n=arguments[0],r=arguments[1];var i=arguments[2];this.setDataProperty(n,r,i)}}},{key:"unset",value:function(){switch(this._history=this.parse(),arguments.length){case 0:for(var t=0,e=Object.keys(this._data);t<e.length;t++){var n=e[t];this.unsetDataProperty(n)}break;case 1:var r=arguments[0];this.unsetDataProperty(r)}}},{key:"setDataProperty",value:function(t,e,n){if(!this._data["_".concat(t)]){var r=this;Object.defineProperties(this._data,_defineProperty({},"_".concat(t),{configurable:!0,get:function(){return this[t]},set:function(e){if(this[t]=e,!n&&!r._isSetting){var i=["set",":",t].join("");r.emit(i,{name:i,data:{key:t,value:e}},r),r.emit("set",{name:"set",data:{key:t,value:e}},r)}}}))}this._data["_".concat(t)]=e}},{key:"unsetDataProperty",value:function(t){var e=["unset",":",t].join(""),n=this._data[t];delete this._data["_".concat(t)],delete this._data[t],this.emit(e,{name:e,data:{key:t,value:n}}),this.emit("unset",{name:"unset",data:{key:t,value:n}})}},{key:"parse",value:function(t){return t=t||this._data,JSON.parse(JSON.stringify(Object.assign({},t)))}},{key:"_isSetting",get:function(){return this.isSetting},set:function(t){this.isSetting=t}},{key:"_defaults",get:function(){return this._defaults},set:function(t){this.defaults=t,this.set(this.defaults)}},{key:"_schema",get:function(){return this._schema},set:function(t){this.schema=t}},{key:"_histiogram",get:function(){return this.histiogram||{length:1}},set:function(t){this.histiogram=Object.assign(this._histiogram,t)}},{key:"_history",get:function(){return this.history=this.history?this.history:[],this.history},set:function(t){Object.keys(t).length&&this._histiogram.length&&(this._history.unshift(this.parse(t)),this._history.splice(this._histiogram.length))}},{key:"_data",get:function(){return this.data=this.data?this.data:{},this.data}},{key:"_dataEvents",set:function(t){MVC.Utils.bindEventsToTargetObjects(t,this,this.dataCallbacks)}},{key:"_dataCallbacks",get:function(){return this.dataCallbacks=this.dataCallbacks?this.dataCallbacks:{},this.dataCallbacks},set:function(t){this.dataCallbacks=MVC.Utils.addPropertiesToTargetObject(t,this._dataCallbacks)}}]),e}(MVC.Base),MVC.Emitter=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).settings&&t.settings.name&&(t._name=t.settings.name),t}return _inherits(e,t),_createClass(e,[{key:"_name",get:function(){return this.name},set:function(t){this.name=t}},{key:"emission",get:function(){return{name:this._name,data:this.parse()}}}]),e}(MVC.Model),MVC.View=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).addSettings(),t}return _inherits(e,t),_createClass(e,[{key:"addSettings",value:function(){Object.keys(this._settings).length?(this._settings.elementName&&(this._elementName=this._settings.elementName),this._settings.element&&(this._element=this._settings.element),this._settings.attributes&&(this._attributes=this._settings.attributes),this._ui=this._settings.ui||{},this._settings.uiCallbacks&&(this._uiCallbacks=this._settings.uiCallbacks),this._settings.observerCallbacks&&(this._observerCallbacks=this._settings.observerCallbacks),this._settings.uiEmitters&&(this._uiEmitters=this._settings.uiEmitters),this._settings.uiEvents&&(this._uiEvents=this._settings.uiEvents),this._settings.observers&&(this._observers=this._settings.observers),this._settings.templates&&(this._templates=this._settings.templates),this._settings.insert&&(this._insert=this._settings.insert)):this._elementName="div"}},{key:"remove",value:function(){this.element.parentElement.removeChild(this.element)}},{key:"_elementName",get:function(){return this._element.tagName},set:function(t){this._element||(this._element=document.createElement(t))}},{key:"_element",get:function(){return this.element},set:function(t){t instanceof HTMLElement?this.element=t:"string"==typeof t&&(this.element=document.querySelector(t))}},{key:"_attributes",get:function(){return this._element.attributes},set:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=_slicedToArray(n[e],2),i=r[0],s=r[1];void 0===s?this._element.removeAttribute(i):this._element.setAttribute(i,s)}this.attributes=this._element.attributes}},{key:"_ui",get:function(){return this.ui=this.ui?this.ui:{},this.ui},set:function(t){this._ui.$=this.element;for(var e=0,n=Object.entries(t);e<n.length;e++){var r=_slicedToArray(n[e],2),i=r[0],s=r[1];void 0===s?delete this._ui[i]:this._ui[i]=this._element.querySelectorAll(s)}}},{key:"_uiEvents",set:function(t){MVC.Utils.bindEventsToTargetObjects(t,this.ui,this.uiCallbacks)}},{key:"_uiCallbacks",get:function(){return this.uiCallbacks=this.uiCallbacks?this.uiCallbacks:{},this.uiCallbacks},set:function(t){this.uiCallbacks=MVC.Utils.addPropertiesToTargetObject(t,this._uiCallbacks)}},{key:"_observerCallbacks",get:function(){return this.observerCallbacks=this.observerCallbacks?this.observerCallbacks:{},this.observerCallbacks},set:function(t){this.observerCallbacks=MVC.Utils.addPropertiesToTargetObject(t,this._observerCallbacks)}},{key:"_uiEmitters",get:function(){return this.uiEmitters=this.uiEmitters?this.uiEmitters:{},this.uiEmitters},set:function(t){this.uiEmitters=MVC.Utils.addPropertiesToTargetObject(t,this._uiEmitters)}},{key:"_observers",get:function(){return this.observers=this.observers?this.observers:{},this.observers},set:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=_slicedToArray(n[e],2),i=r[0],s=r[1],o=i.split(" "),a=o[0],l=a.match("@","")?MVC.Utils.objectQuery(a.replace("@",""),this.ui):document.querySelectorAll(a),u=o[1]?o[1].split(",").reduce(function(t,e){return t[e]=!0,t},{}):{},c=new MVC.Observer({context:this,target:l,options:u,mutations:s});this._observers[a]=c}}},{key:"_insert",set:function(t){this.element.parentElement&&this.remove();var e=t.method;document.querySelector(t.element).insertAdjacentElement(e,this.element)}},{key:"_templates",get:function(){return this.templates=this.templates?this.templates:{},this.templates},set:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=_slicedToArray(n[e],2),i=r[0],s=r[1];this._templates[i]=s}}}]),e}(MVC.Base),MVC.Controller=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).addSettings(),t}return _inherits(e,t),_createClass(e,[{key:"addSettings",value:function(){Object.keys(this._settings).length&&(this.settings.emitters&&(this._emitters=this.settings.emitters),this.settings.modelCallbacks&&(this._modelCallbacks=this.settings.modelCallbacks),this.settings.viewCallbacks&&(this._viewCallbacks=this.settings.viewCallbacks),this.settings.controllerCallbacks&&(this._controllerCallbacks=this.settings.controllerCallbacks),this.settings.routerCallbacks&&(this._routerCallbacks=this.settings.routerCallbacks),this.settings.models&&(this._models=this.settings.models),this.settings.views&&(this._views=this.settings.views),this.settings.controllers&&(this._controllers=this.settings.controllers),this.settings.routers&&(this._routers=this.settings.routers),this.settings.modelEvents&&(this._modelEvents=this.settings.modelEvents),this.settings.viewEvents&&(this._viewEvents=this.settings.viewEvents),this.settings.controllerEvents&&(this._controllerEvents=this.settings.controllerEvents))}},{key:"_emitters",get:function(){return this.emitters=this.emitters?this.emitters:{},this.emitters},set:function(t){this.emitters=MVC.Utils.addPropertiesToTargetObject(t,this._emitters)}},{key:"_modelCallbacks",get:function(){return this.modelCallbacks=this.modelCallbacks?this.modelCallbacks:{},this.modelCallbacks},set:function(t){this.modelCallbacks=MVC.Utils.addPropertiesToTargetObject(t,this._modelCallbacks)}},{key:"_viewCallbacks",get:function(){return this.viewCallbacks=this.viewCallbacks?this.viewCallbacks:{},this.viewCallbacks},set:function(t){this.viewCallbacks=MVC.Utils.addPropertiesToTargetObject(t,this._viewCallbacks)}},{key:"_controllerCallbacks",get:function(){return this.controllerCallbacks=this.controllerCallbacks?this.controllerCallbacks:{},this.controllerCallbacks},set:function(t){this.controllerCallbacks=MVC.Utils.addPropertiesToTargetObject(t,this._controllerCallbacks)}},{key:"_routerCallbacks",get:function(){return this.routerCallbacks=this.routerCallbacks?this.routerCallbacks:{},this.routerCallbacks},set:function(t){this.routerCallbacks=MVC.Utils.addPropertiesToTargetObject(t,this._routerCallbacks)}},{key:"_models",get:function(){return this.models=this.models?this.models:{},this.models},set:function(t){this.models=MVC.Utils.addPropertiesToTargetObject(t,this._models)}},{key:"_views",get:function(){return this.views=this.views?this.views:{},this.views},set:function(t){this.views=MVC.Utils.addPropertiesToTargetObject(t,this._views)}},{key:"_controllers",get:function(){return this.controllers=this.controllers?this.controllers:{},this.controllers},set:function(t){this.controllers=MVC.Utils.addPropertiesToTargetObject(t,this._controllers)}},{key:"_routers",get:function(){return this.routers=this.routers?this.routers:{},this.routers},set:function(t){this.routers=MVC.Utils.addPropertiesToTargetObject(t,this._routers)}},{key:"_modelEvents",set:function(t){MVC.Utils.bindEventsToTargetObjects(t,this._models,this._modelCallbacks)}},{key:"_viewEvents",set:function(t){MVC.Utils.bindEventsToTargetObjects(t,this._views,this._viewCallbacks)}},{key:"_controllerEvents",set:function(t){MVC.Utils.bindEventsToTargetObjects(t,this._controllers,this._controllerCallbacks)}}]),e}(MVC.Base),MVC.Router=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).addSettings(),t.setRoutes(t.routes,t.controllers),t.setEvents(),t.start(),"function"==typeof t.initialize&&t.initialize(),t}return _inherits(e,t),_createClass(e,[{key:"addSettings",value:function(){this._settings&&(this._settings.routes&&(this.routes=this._settings.routes),this._settings.controllers&&(this.controllers=this._settings.controllers))}},{key:"start",value:function(){""===this.getRoute()?this.navigate("/"):window.dispatchEvent(new Event("hashchange"))}},{key:"setRoutes",value:function(t,e){for(var n in t)this.routes[n]=e[t[n]]}},{key:"setEvents",value:function(){window.addEventListener("hashchange",this.hashChange.bind(this))}},{key:"getRoute",value:function(){return String(window.location.hash).split("#").pop()}},{key:"hashChange",value:function(t){var e=this.getRoute();try{this.routes[e](t),this.emit("navigate",this)}catch(t){}}},{key:"navigate",value:function(t){window.location.hash=t}}]),e}(MVC.Base);
//# sourceMappingURL=../.maps/browser/mvc-framework-min.js.map
