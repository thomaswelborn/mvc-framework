var MVC=MVC||{};MVC.Constants={},MVC.CONST=MVC.Constants,MVC.Constants.Events={},MVC.CONST.EV=MVC.Constants.Events,MVC.Templates={ObjectQueryStringFormatInvalidRoot:function(t){return['Object Query "string" property must be formatted to first include "[@]".'].join("\n")},DataSchemaMismatch:function(t){return["Data and Schema properties do not match."].join("\n")},DataFunctionInvalid:function(t){['Model Data property type "Function" is not valid.'].join("\n")},DataUndefined:function(t){["Model Data property undefined."].join("\n")},SchemaUndefined:function(t){['Model "Schema" undefined.'].join("\n")}},MVC.TMPL=MVC.Templates,MVC.Utils={},MVC.Utils.isArray=function(t){return Array.isArray(t)},MVC.Utils.isObject=function(t){return!Array.isArray(t)&&"object"==typeof t},MVC.Utils.isEqualType=function(t,e){return t===e},MVC.Utils.isHTMLElement=function(t){return t instanceof HTMLElement},MVC.Utils.typeOf=function(t){switch(typeof t){case"object":return MVC.Utils.isArray(t)?"array":MVC.Utils.isObject(t)?"object":null===t?"null":void 0;case"string":case"number":case"boolean":case"undefined":case"function":return typeof t}},MVC.Utils.addPropertiesToObject=function(){var t;switch(arguments.length){case 2:var e=arguments[0];for(var[s,i]of(t=arguments[1],Object.entries(e)))t[s]=i;break;case 3:var r=arguments[0],n=arguments[1];(t=arguments[2])[r]=n}return t},MVC.Utils.objectQuery=function(t,e){var s=MVC.Utils.objectQuery.parseNotation(t);return"@"===s[0]&&s.splice(0,1),s.length?(e=MVC.Utils.isObject(e)?Object.entries(e):e,s.reduce((t,e,s,i)=>{var r=[];for(var[n,a]of(e=MVC.Utils.objectQuery.parseFragment(e),t))n.match(e)&&(r=s===i.length-1?r.concat([[n,a]]):r.concat(Object.entries(a)));return t=r},e)):e},MVC.Utils.objectQuery.parseNotation=function(t){return t="["===t.charAt(0)&&"]"==t.charAt(t.length-1)?t.slice(1,-1).split("]["):t.split(".")},MVC.Utils.objectQuery.parseFragment=function(t){return"/"===t.charAt(0)&&"/"==t.charAt(t.length-1)&&(t=t.slice(1,-1),t=new RegExp("^".concat(t,"$"))),t},MVC.Utils.toggleEventsForTargetObjects=function(t,e,s,i){for(var[r,n]of Object.entries(e)){var a=r.split(" "),l=a[0],h=a[1],o=MVC.Utils.objectQuery(l,s);for(var[c,d]of o=MVC.Utils.isArray(o)?o:[["@",o]]){var v="on"===t?d instanceof NodeList||d instanceof HTMLElement||d instanceof Document?"addEventListener":"on":d instanceof NodeList||d instanceof HTMLElement||d instanceof Document?"removeEventListener":"off",b=MVC.Utils.objectQuery(n,i)[0][1];if(d instanceof NodeList)for(var u of d)u[v](h,b);else HTMLElement,d[v](h,b)}}},MVC.Utils.bindEventsToTargetObjects=function(){this.toggleEventsForTargetObjects("on",...arguments)},MVC.Utils.unbindEventsFromTargetObjects=function(){this.toggleEventsForTargetObjects("off",...arguments)},MVC.Utils.validateDataSchema=function(t,e){if(!e)throw MVC.TMPL;switch(MVC.Utils.typeOf(t)){case"array":var s=[];if(e="function"===MVC.Utils.typeOf(e)?e():e,MVC.Utils.isEqualType(MVC.Utils.typeOf(e),MVC.Utils.typeOf(s)))for(var[i,r]of(console.log(e.name),Object.entries(t)))s.push(this.validateDataSchema(r));return s;case"object":var n={};if(e="function"===MVC.Utils.typeOf(e)?e():e,MVC.Utils.isEqualType(MVC.Utils.typeOf(e),MVC.Utils.typeOf(n)))for(var[a,l]of(console.log(e.name),Object.entries(t)))n[a]=this.validateDataSchema(l,e[a]);return n;case"string":case"number":case"boolean":if(e="function"===MVC.Utils.typeOf(e)?e():e,MVC.Utils.isEqualType(MVC.Utils.typeOf(e),MVC.Utils.typeOf(t)))return console.log(e.name),t;throw MVC.TMPL;case"null":if(MVC.Utils.isEqualType(MVC.Utils.typeOf(e),MVC.Utils.typeOf(t)))return t;break;case"undefined":case"function":throw MVC.TMPL}},MVC.Events=class{constructor(){}get _events(){return this.events=this.events?this.events:{},this.events}eventCallbacks(t){return this._events[t]||{}}eventCallbackName(t){return t.name.length?t.name:"anonymousFunction"}eventCallbackGroup(t,e){return t[e]||[]}on(t,e){var s=this.eventCallbacks(t),i=this.eventCallbackName(e),r=this.eventCallbackGroup(s,i);r.push(e),s[i]=r,this._events[t]=s}off(){switch(arguments.length){case 1:var t=arguments[0];delete this._events[t];break;case 2:t=arguments[0];var e=arguments[1],s=this.eventCallbackName(e);delete this._events[t][s]}}emit(t,e){var s=this.eventCallbacks(t);for(var[i,r]of Object.entries(s))for(var n of r){n(e,...Object.values(arguments).splice(2))}}},MVC.Channels=class{constructor(){}get _channels(){return this.channels=this.channels?this.channels:{},this.channels}channel(t){return this._channels[t]=this._channels[t]?this._channels[t]:new MVC.Channels.Channel,this._channels[t]}off(t){delete this._channels[t]}},MVC.Channels.Channel=class{constructor(){}get _responses(){return this.responses=this.responses?this.responses:{},this.responses}response(t,e){if(!e)return this._responses[response];this._responses[t]=e}request(t,e){if(this._responses[t])return this._responses[t](e)}off(t){if(t)delete this._responses[t];else for(var[e]of Object.keys(this._responses))delete this._responses[e]}},MVC.Base=class extends MVC.Events{constructor(t,e){super(),e&&(this._configuration=e),t&&(this._settings=t)}get _configuration(){return this.configuration=this.configuration?this.configuration:{},this.configuration}set _configuration(t){this.configuration=t}get _settings(){return this.settings=this.settings?this.settings:{},this.settings}set _settings(t){this.settings=MVC.Utils.addPropertiesToObject(t,this._settings)}get _emitters(){return this.emitters=this.emitters?this.emitters:{},this.emitters}set _emitters(t){this.emitters=MVC.Utils.addPropertiesToObject(t,this._emitters)}},MVC.Service=class extends MVC.Base{constructor(){super(...arguments)}get _defaults(){return this.defaults||{contentType:{"Content-Type":"application/json"},responseType:"json"}}get _responseTypes(){return["","arraybuffer","blob","document","json","text"]}get _responseType(){return this.responseType}set _responseType(t){this._xhr.responseType=this._responseTypes.find(e=>e===t)||this._defaults.responseType}get _type(){return this.type}set _type(t){this.type=t}get _url(){return this.url}set _url(t){this.url=t}get _headers(){return this.headers||[]}set _headers(t){for(var e of(this._headers.length=0,t))this._xhr.setRequestHeader({header:e}[0],{header:e}[1]),this._headers.push(e)}get _data(){return this.data}set _data(t){this.data=t}get _xhr(){return this.xhr=this.xhr?this.xhr:new XMLHttpRequest,this.xhr}get _enabled(){return this.enabled||!1}set _enabled(t){this.enabled=t}request(t){return t=t||this.data||null,new Promise((e,s)=>{200===this._xhr.status&&this._xhr.abort(),this._xhr.open(this.type,this.url),this._headers=this.settings.headers||[this._defaults.contentType],this._xhr.onload=e,this._xhr.onerror=s,this._xhr.send(t)}).then(t=>(this.emit("xhr:resolve",{name:"xhr:resolve",data:t.currentTarget}),t))}enable(){var t=this.settings;!this.enabled&&Object.keys(t).length&&(t.type&&(this._type=t.type),t.url&&(this._url=t.url),t.data&&(this._data=t.data||null),this.settings.responseType&&(this._responseType=this._settings.responseType),this._enabled=!0)}disable(){var t=this.settings;this.enabled&&Object.keys(t).length&&(delete this._type,delete this._url,delete this._data,delete this._headers,delete this._responseType,this._enabled=!1)}},MVC.Model=class extends MVC.Base{constructor(){super(...arguments)}get _localStorage(){return this.localStorage}set _localStorage(t){this.localStorage=t}get _isSetting(){return this.isSetting}set _isSetting(t){this.isSetting=t}get _defaults(){return this._defaults}set _defaults(t){this.defaults=t,this.set(this.defaults)}get _schema(){return this._schema}set _schema(t){this.schema=t}get _histiogram(){return this.histiogram||{length:1}}set _histiogram(t){this.histiogram=Object.assign(this._histiogram,t)}get _history(){return this.history=this.history?this.history:[],this.history}set _history(t){Object.keys(t).length&&this._histiogram.length&&(this._history.unshift(this.parse(t)),this._history.splice(this._histiogram.length))}get _db(){var t=localStorage.getItem(this.localStorage.endpoint);return this.db=t||"{}",JSON.parse(this.db)}set _db(t){t=JSON.stringify(t),localStorage.setItem(this.localStorage.endpoint,t)}get _data(){return this.data=this.data?this.data:{},this.data}get _dataEvents(){return this.dataEvents=this.dataEvents?this.dataEvents:{},this.dataEvents}set _dataEvents(t){this.dataEvents=MVC.Utils.addPropertiesToObject(t,this._dataEvents)}get _dataCallbacks(){return this.dataCallbacks=this.dataCallbacks?this.dataCallbacks:{},this.dataCallbacks}set _dataCallbacks(t){this.dataCallbacks=MVC.Utils.addPropertiesToObject(t,this._dataCallbacks)}get _services(){return this.services=this.services?this.services:{},this.services}set _services(t){this.services=MVC.Utils.addPropertiesToObject(t,this._services)}get _serviceEvents(){return this.serviceEvents=this.serviceEvents?this.serviceEvents:{},this.serviceEvents}set _serviceEvents(t){this.serviceEvents=MVC.Utils.addPropertiesToObject(t,this._serviceEvents)}get _serviceCallbacks(){return this.serviceCallbacks=this.serviceCallbacks?this.serviceCallbacks:{},this.serviceCallbacks}set _serviceCallbacks(t){this.serviceCallbacks=MVC.Utils.addPropertiesToObject(t,this._serviceCallbacks)}get _enabled(){return this.enabled||!1}set _enabled(t){this.enabled=t}enableServiceEvents(){MVC.Utils.bindEventsToTargetObjects(this.serviceEvents,this.services,this.serviceCallbacks)}disableServiceEvents(){MVC.Utils.unbindEventsToTargetObjects(this.serviceEvents,this.services,this.serviceCallbacks)}enableDataEvents(){MVC.Utils.bindEventsToTargetObjects(this.dataEvents,this,this.dataCallbacks)}disableDataEvents(){MVC.Utils.unbindEventsToTargetObjects(this.dataEvents,this,this.dataCallbacks)}get(){var t=arguments[0];return this._data["_".concat(t)]}set(){switch(this._history=this.parse(),arguments.length){case 1:var t=Object.entries(arguments[0]);t.forEach((e,s)=>{var[i,r]=e;0===s?this._isSetting=!0:s===t.length-1&&(this._isSetting=!1),this.setDataProperty(i,r),this.localStorage&&this.setDB(i,r)});break;case 2:var e=arguments[0],s=arguments[1];this.setDataProperty(e,s),this.localStorage&&this.setDB(e,s);break;case 3:e=arguments[0],s=arguments[1];var i=arguments[2];this.setDataProperty(e,s,i),this.localStorage&&this.setDB(e,s)}}unset(){switch(this._history=this.parse(),arguments.length){case 0:for(var t of Object.keys(this._data))this.unsetDataProperty(t);break;case 1:var e=arguments[0];this.unsetDataProperty(e)}}setDB(){var t=this._db;switch(arguments.length){case 1:Object.entries(arguments[0]).forEach(e=>{var[s,i]=e;t[s]=i});break;case 2:var e=arguments[0],s=arguments[1];t[e]=s}this._db=t}unsetDB(){switch(arguments.length){case 0:delete this._db;break;case 1:var t=this._db;delete t[arguments[0]],this._db=t}}setDataProperty(t,e,s){if(!this._data["_".concat(t)]){var i=this;Object.defineProperties(this._data,{["_".concat(t)]:{configurable:!0,get(){return this[t]},set(e){if(this[t]=e,!s&&!i._isSetting){var r=["set",":",t].join("");i.emit(r,{name:r,data:{key:t,value:e}},i),i.emit("set",{name:"set",data:{key:t,value:e}},i)}}}})}this._data["_".concat(t)]=e}unsetDataProperty(t){var e=["unset",":",t].join(""),s=this._data[t];delete this._data["_".concat(t)],delete this._data[t],this.emit(e,{name:e,data:{key:t,value:s}}),this.emit("unset",{name:"unset",data:{key:t,value:s}})}parse(t){return t=t||this._data,JSON.parse(JSON.stringify(Object.assign({},t)))}enable(){this.settings&&!this.enabled&&(this.settings.localStorage&&(this.localStorage=this.settings.localStorage),this.settings.histiogram&&(this._histiogram=this.settings.histiogram),this.settings.emitters&&(this._emitters=this.settings.emitters),this.settings.services&&(this._services=this.settings.services),this.settings.serviceCallbacks&&(this._serviceCallbacks=this.settings.serviceCallbacks),this.settings.serviceEvents&&(this._serviceEvents=this.settings.serviceEvents),this.settings.data&&this.set(this.settings.data),this.settings.dataCallbacks&&(this._dataCallbacks=this.settings.dataCallbacks),this.settings.dataEvents&&(this._dataEvents=this.settings.dataEvents),this.settings.schema&&(this._schema=this.settings.schema),this.settings.defaults&&(this._defaults=this.settings.defaults),this.services&&this.serviceEvents&&this.serviceCallbacks&&this.enableServiceEvents(),this.dataEvents&&this.dataCallbacks&&this.enableDataEvents(),this._enabled=!0)}disable(){this.settings&&!this.enabled&&(this.services&&this.serviceEvents&&this.serviceCallbacks&&this.disableServiceEvents(),this.dataEvents&&this.dataCallbacks&&this.disableDataEvents(),delete this.localStorage,delete this._histiogram,delete this._services,delete this._serviceCallbacks,delete this._serviceEvents,delete this._data,delete this._dataCallbacks,delete this._dataEvents,delete this._schema,delete this._emitters)}},MVC.Emitter=class extends MVC.Model{constructor(){super(...arguments),this.settings&&this.settings.name&&(this._name=this.settings.name)}get _name(){return this.name}set _name(t){this.name=t}emission(){var t={name:this.name,data:this.data};return this.emit(this.name,t),t}},MVC.Emitters={},MVC.Emitters.NavigateEmitter=class extends MVC.Emitter{constructor(){super(...arguments),this.addSettings(),this.enable()}addSettings(){this._name="navigate",this._schema={oldURL:String,newURL:String,currentRoute:String,currentController:String}}},MVC.View=class extends MVC.Base{constructor(){super(...arguments)}get _elementName(){return this._element.tagName}set _elementName(t){this._element||(this._element=document.createElement(t))}get _element(){return this.element}set _element(t){t instanceof HTMLElement||t instanceof Document?this.element=t:"string"==typeof t&&(this.element=document.querySelector(t)),this.elementObserver.observe(this.element,{subtree:!0,childList:!0})}get _attributes(){return this._element.attributes}set _attributes(t){for(var[e,s]of Object.entries(t))void 0===s?this._element.removeAttribute(e):this._element.setAttribute(e,s)}get _ui(){return this.ui=this.ui?this.ui:{},this.ui}set _ui(t){for(var[e,s]of(this._ui.$element||(this._ui.$element=this.element),Object.entries(t)))"string"==typeof s?this._ui[e]=this._element.querySelectorAll(s):(s instanceof HTMLElement||s instanceof Document)&&(this._ui[e]=s)}get _uiEvents(){return this.uiEvents}set _uiEvents(t){this.uiEvents=t}get _uiCallbacks(){return this.uiCallbacks=this.uiCallbacks?this.uiCallbacks:{},this.uiCallbacks}set _uiCallbacks(t){this.uiCallbacks=MVC.Utils.addPropertiesToObject(t,this._uiCallbacks)}get _observerCallbacks(){return this.observerCallbacks=this.observerCallbacks?this.observerCallbacks:{},this.observerCallbacks}set _observerCallbacks(t){this.observerCallbacks=MVC.Utils.addPropertiesToObject(t,this._observerCallbacks)}get elementObserver(){return this._elementObserver=this._elementObserver?this._elementObserver:new MutationObserver(this.elementObserve.bind(this)),this._elementObserver}get _insert(){return this.insert}set _insert(t){this.insert=t}get _enabled(){return this.enabled||!1}set _enabled(t){this.enabled=t}get _templates(){return this.templates=this.templates?this.templates:{},this.templates}set _templates(t){this.templates=MVC.Utils.addPropertiesToObject(t,this._templates)}elementObserve(t,e){for(var[s,i]of Object.entries(t))switch(i.type){case"childList":for(var r of["addedNodes","removedNodes"])i[r].length&&this.resetUI()}}autoInsert(){this.insert&&document.querySelectorAll(this.insert.element).forEach(t=>{t.insertAdjacentElement(this.insert.method,this.element)})}autoRemove(){this.element&&this.element.parentElement&&this.element.parentElement.removeChild(this.element)}enableElement(t){(t=t||this.settings).elementName&&(this._elementName=t.elementName),t.element&&(this._element=t.element),t.attributes&&(this._attributes=t.attributes),t.templates&&(this._templates=t.templates),t.insert&&(this._insert=t.insert)}disableElement(t){t=t||this.settings,this.element&&this.element.parentElement&&this.element.parentElement.removeChild(this.element),this.element&&delete this.element,this.attributes&&delete this.attributes,this.templates&&delete this.templates,this.insert&&delete this.insert}resetUI(){this.disableUI(),this.enableUI()}enableUI(t){(t=t||this.settings).ui&&(this._ui=t.ui),t.uiCallbacks&&(this._uiCallbacks=t.uiCallbacks),t.uiEvents&&(this._uiEvents=t.uiEvents,this.enableUIEvents())}disableUI(t){(t=t||this.settings).uiEvents&&(this.disableUIEvents(),delete this._uiEvents),delete this.uiEvents,delete this.ui,delete this.uiCallbacks}enableUIEvents(){this.uiEvents&&this.ui&&this.uiCallbacks&&MVC.Utils.bindEventsToTargetObjects(this.uiEvents,this.ui,this.uiCallbacks)}disableUIEvents(){this.uiEvents&&this.ui&&this.uiCallbacks&&MVC.Utils.unbindEventsFromTargetObjects(this.uiEvents,this.ui,this.uiCallbacks)}enableEmitters(){this.settings.emitters&&(this._emitters=this.settings.emitters)}disableEmitters(){this._emitters&&delete this._emitters}enable(){var t=this.settings;if(t&&!this._enabled)return this.enableEmitters(),this.enableElement(t),this.enableUI(t),this._enabled=!0,this}disable(){var t=this.settings;if(t&&this._enabled)return this.disableUI(t),this.disableElement(t),this.disableEmitters(),this._enabled=!1,thiss}},MVC.Controller=class extends MVC.Base{constructor(){super(...arguments)}get _emitterCallbacks(){return this.emitterCallbacks=this.emitterCallbacks?this.emitterCallbacks:{},this.emitterCallbacks}set _emitterCallbacks(t){this.emitterCallbacks=MVC.Utils.addPropertiesToObject(t,this._emitterCallbacks)}get _modelCallbacks(){return this.modelCallbacks=this.modelCallbacks?this.modelCallbacks:{},this.modelCallbacks}set _modelCallbacks(t){this.modelCallbacks=MVC.Utils.addPropertiesToObject(t,this._modelCallbacks)}get _viewCallbacks(){return this.viewCallbacks=this.viewCallbacks?this.viewCallbacks:{},this.viewCallbacks}set _viewCallbacks(t){this.viewCallbacks=MVC.Utils.addPropertiesToObject(t,this._viewCallbacks)}get _controllerCallbacks(){return this.controllerCallbacks=this.controllerCallbacks?this.controllerCallbacks:{},this.controllerCallbacks}set _controllerCallbacks(t){this.controllerCallbacks=MVC.Utils.addPropertiesToObject(t,this._controllerCallbacks)}get _models(){return this.models=this.models?this.models:{},this.models}set _models(t){this.models=MVC.Utils.addPropertiesToObject(t,this._models)}get _views(){return this.views=this.views?this.views:{},this.views}set _views(t){this.views=MVC.Utils.addPropertiesToObject(t,this._views)}get _controllers(){return this.controllers=this.controllers?this.controllers:{},this.controllers}set _controllers(t){this.controllers=MVC.Utils.addPropertiesToObject(t,this._controllers)}get _routers(){return this.routers=this.routers?this.routers:{},this.routers}set _routers(t){this.routers=MVC.Utils.addPropertiesToObject(t,this._routers)}get _routerEvents(){return this.routerEvents=this.routerEvents?this.routerEvents:{},this.routerEvents}set _routerEvents(t){this.routerEvents=MVC.Utils.addPropertiesToObject(t,this._routerEvents)}get _routerCallbacks(){return this.routerCallbacks=this.routerCallbacks?this.routerCallbacks:{},this.routerCallbacks}set _routerCallbacks(t){this.routerCallbacks=MVC.Utils.addPropertiesToObject(t,this._routerCallbacks)}get _emitterEvents(){return this.emitterEvents=this.emitterEvents?this.emitterEvents:{},this.emitterEvents}set _emitterEvents(t){this.emitterEvents=MVC.Utils.addPropertiesToObject(t,this._emitterEvents)}get _modelEvents(){return this.modelEvents=this.modelEvents?this.modelEvents:{},this.modelEvents}set _modelEvents(t){this.modelEvents=MVC.Utils.addPropertiesToObject(t,this._modelEvents)}get _viewEvents(){return this.viewEvents=this.viewEvents?this.viewEvents:{},this.viewEvents}set _viewEvents(t){this.viewEvents=MVC.Utils.addPropertiesToObject(t,this._viewEvents)}get _controllerEvents(){return this.controllerEvents=this.controllerEvents?this.controllerEvents:{},this.controllerEvents}set _controllerEvents(t){this.controllerEvents=MVC.Utils.addPropertiesToObject(t,this._controllerEvents)}get _enabled(){return this.enabled||!1}set _enabled(t){this.enabled=t}enableModelEvents(){MVC.Utils.bindEventsToTargetObjects(this.modelEvents,this.models,this.modelCallbacks)}disableModelEvents(){MVC.Utils.unbindEventsToTargetObjects(this.modelEvents,this.models,this.modelCallbacks)}enableViewEvents(){MVC.Utils.bindEventsToTargetObjects(this.viewEvents,this.views,this.viewCallbacks)}disableViewEvents(){MVC.Utils.unbindEventsToTargetObjects(this.viewEvents,this.views,this.viewCallbacks)}enableControllerEvents(){MVC.Utils.bindEventsToTargetObjects(this.controllerEvents,this.controllers,this.controllerCallbacks)}disableControllerEvents(){MVC.Utils.unbindEventsToTargetObjects(this.controllerEvents,this.controllers,this.controllerCallbacks)}enableEmitterEvents(){MVC.Utils.bindEventsToTargetObjects(this.emitterEvents,this.emitters,this.emitterCallbacks)}disableEmitterEvents(){MVC.Utils.unbindEventsToTargetObjects(this.emitterEvents,this.emitters,this.emitterCallbacks)}enableRouterEvents(){MVC.Utils.bindEventsToTargetObjects(this.routerEvents,this.routers,this.routerCallbacks)}disableRouterEvents(){MVC.Utils.unbindEventsToTargetObjects(this.routerEvents,this.routers,this.routerCallbacks)}enable(){var t=this.settings;t&&!this.enabled&&(t.emitterCallbacks&&(this._emitterCallbacks=t.emitterCallbacks),t.modelCallbacks&&(this._modelCallbacks=t.modelCallbacks),t.viewCallbacks&&(this._viewCallbacks=t.viewCallbacks),t.controllerCallbacks&&(this._controllerCallbacks=t.controllerCallbacks),t.routerCallbacks&&(this._routerCallbacks=t.routerCallbacks),t.emitters&&(this._emitters=t.emitters),t.models&&(this._models=t.models),t.views&&(this._views=t.views),t.controllers&&(this._controllers=t.controllers),t.routers&&(this._routers=t.routers),t.routerEvents&&(this._routerEvents=t.routerEvents),t.emitterEvents&&(this._emitterEvents=t.emitterEvents),t.modelEvents&&(this._modelEvents=t.modelEvents),t.viewEvents&&(this._viewEvents=t.viewEvents),t.controllerEvents&&(this._controllerEvents=t.controllerEvents),this.emitterEvents&&this.emitters&&this.emitterCallbacks&&this.enableEmitterEvents(),this.routerEvents&&this.routers&&this.routerCallbacks&&this.enableRouterEvents(),this.modelEvents&&this.models&&this.modelCallbacks&&this.enableModelEvents(),this.viewEvents&&this.views&&this.viewCallbacks&&this.enableViewEvents(),this.controllerEvents&&this.controllers&&this.controllerCallbacks&&this.enableControllerEvents(),this._enabled=!0)}disable(){this.settings&&this.enabled&&(this.emitterEvents&&this.emitters&&this.emitterCallbacks&&this.disableEmitterEvents(),this.routerEvents&&this.routers&&this.routerCallbacks&&this.disableRouterEvents(),this.modelEvents&&this.models&&this.modelCallbacks&&this.disableModelEvents(),this.viewEvents&&this.views&&this.viewCallbacks&&this.disableViewEvents(),this.controllerEvents&&this.controllers&&this.controllerCallbacks&&this.disableControllerEvents(),delete this._emitters,delete this._modelCallbacks,delete this._viewCallbacks,delete this._controllerCallbacks,delete this._routerCallbacks,delete this._models,delete this._views,delete this._controllers,delete this._routers,delete this._modelEvents,delete this._viewEvents,delete this._controllerEvents,this._enabled=!1)}},MVC.Router=class extends MVC.Base{constructor(){super(...arguments)}get route(){return this._hash?String(window.location.hash).split("#").pop():String(window.location.pathname)}get _hash(){return this.hash}set _hash(t){this.hash=t}get _enabled(){return this.enabled||!1}set _enabled(t){this.enabled=t}get _routes(){return this.routes=this.routes?this.routes:{},this.routes}set _routes(t){this.routes=MVC.Utils.addPropertiesToObject(t,this._routes)}get _controller(){return this.controller}set _controller(t){this.controller=t}get _previousURL(){return this.previousURL}set _previousURL(t){this.previousURL=t}get _currentURL(){return this.currentURL}set _currentURL(t){this.currentURL=t}get fragmentIDRegExp(){return new RegExp(/^([0-9A-Z\?\=\,\.\*\-\_\'\"\^\%\$\#\@\!\~\(\)\{\}\&\<\>\\\/])*$/,"gi")}fragmentNameRegExp(t){return new RegExp("^".concat(t,"$"))}enable(){this.settings&&!this.enabled&&(this._hash="boolean"!=typeof this.settings.hash||this.settings.hash,this.enableEmitters(),this.enableEvents(),this.enableRoutes(),this.routeChange(),this._enabled=!0)}disable(){this.settings&&this.enabled&&(delete this._hash,this.disableEvents(),this.disableRoutes(),this.disableEmitters(),this._enabled=!1)}enableRoutes(){this.settings.controller&&(this._controller=this.settings.controller),this._routes=Object.entries(this.settings.routes).reduce((t,e,s,i)=>{var[r,n]=e;return t[r]=this.controller[n],t},{})}enableEmitters(){this._emitters={navigateEmitter:new MVC.Emitters.NavigateEmitter}}disableEmitters(){delete this._emitters.navigateEmitter}disableRoutes(){delete this._routes,delete this._controller}enableEvents(){window.addEventListener("hashchange",this.routeChange.bind(this))}disableEvents(){window.removeEventListener("hashchange",this.routeChange.bind(this))}routeChange(){var t=this.route.split("/").filter(t=>t.length);t=t.length?t:["/"];var e=Object.entries(this.routes).filter(e=>{var s,[i,r]=e;if(i=(i=i.split("/").filter(t=>t.length)).length?i:["/"],t.length&&t.length===i.length)return i.filter((e,i)=>{if((void 0===s||!0===s)&&(":"===e[0]?e=this.fragmentIDRegExp:(e=e.replace(new RegExp("/","gi"),"\\/"),e=this.fragmentNameRegExp(e)),!0===(s=e.test(t[i]))&&i===t.length-1))return r})[0]})[0];try{this.currentURL&&(this._previousURL=this.currentURL),this._currentURL=window.location.href;e[0];var s=e[1],i=this.emitters.navigateEmitter,r={currentURL:this.currentURL,previousURL:this.previousURL,currentRoute:this.route,currentController:s.name};i.set(r),this.emit(i.name,i.emission()),s(i.emission())}catch(t){throw"Route Definition Error"}}navigate(t){window.location.hash=t}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1WQy5qcyIsIkNvbnN0YW50cy5qcyIsIkV2ZW50cy5qcyIsIlRlbXBsYXRlcy5qcyIsIlV0aWxzLmpzIiwiaXMuanMiLCJ0eXBlT2YuanMiLCJhZGRQcm9wZXJ0aWVzVG9PYmplY3QuanMiLCJvYmplY3RRdWVyeS5qcyIsInRvZ2dsZUV2ZW50c0ZvclRhcmdldE9iamVjdHMuanMiLCJ2YWxpZGF0ZURhdGFTY2hlbWEuanMiLCJDaGFubmVscy5qcyIsIkNoYW5uZWwuanMiLCJCYXNlLmpzIiwiU2VydmljZS5qcyIsIk1vZGVsLmpzIiwiRW1pdHRlci5qcyIsImluZGV4LmpzIiwiTmF2aWdhdGUuanMiLCJWaWV3LmpzIiwiQ29udHJvbGxlci5qcyIsIlJvdXRlci5qcyJdLCJuYW1lcyI6WyJNVkMiLCJDb25zdGFudHMiLCJDT05TVCIsIkV2ZW50cyIsIkVWIiwiVGVtcGxhdGVzIiwiT2JqZWN0UXVlcnlTdHJpbmdGb3JtYXRJbnZhbGlkUm9vdCIsImRhdGEiLCJqb2luIiwiRGF0YVNjaGVtYU1pc21hdGNoIiwiRGF0YUZ1bmN0aW9uSW52YWxpZCIsIkRhdGFVbmRlZmluZWQiLCJTY2hlbWFVbmRlZmluZWQiLCJUTVBMIiwiVXRpbHMiLCJpc0FycmF5Iiwib2JqZWN0IiwiQXJyYXkiLCJpc09iamVjdCIsImlzRXF1YWxUeXBlIiwidmFsdWVBIiwidmFsdWVCIiwiaXNIVE1MRWxlbWVudCIsIkhUTUxFbGVtZW50IiwidHlwZU9mIiwiYWRkUHJvcGVydGllc1RvT2JqZWN0IiwidGFyZ2V0T2JqZWN0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwicHJvcGVydGllcyIsIl9wcm9wZXJ0eU5hbWUiLCJfcHJvcGVydHlWYWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJwcm9wZXJ0eU5hbWUiLCJwcm9wZXJ0eVZhbHVlIiwib2JqZWN0UXVlcnkiLCJzdHJpbmciLCJjb250ZXh0Iiwic3RyaW5nRGF0YSIsInBhcnNlTm90YXRpb24iLCJzcGxpY2UiLCJyZWR1Y2UiLCJmcmFnbWVudCIsImZyYWdtZW50SW5kZXgiLCJmcmFnbWVudHMiLCJwcm9wZXJ0eUtleSIsInBhcnNlRnJhZ21lbnQiLCJtYXRjaCIsImNvbmNhdCIsImNoYXJBdCIsInNsaWNlIiwic3BsaXQiLCJSZWdFeHAiLCJ0b2dnbGVFdmVudHNGb3JUYXJnZXRPYmplY3RzIiwidG9nZ2xlTWV0aG9kIiwiZXZlbnRzIiwidGFyZ2V0T2JqZWN0cyIsImNhbGxiYWNrcyIsImV2ZW50U2V0dGluZ3MiLCJldmVudENhbGxiYWNrTmFtZSIsImV2ZW50RGF0YSIsImV2ZW50VGFyZ2V0U2V0dGluZ3MiLCJldmVudE5hbWUiLCJldmVudFRhcmdldHMiLCJldmVudFRhcmdldE5hbWUiLCJldmVudFRhcmdldCIsImV2ZW50TWV0aG9kTmFtZSIsIk5vZGVMaXN0IiwiRG9jdW1lbnQiLCJldmVudENhbGxiYWNrIiwiX2V2ZW50VGFyZ2V0IiwiYmluZEV2ZW50c1RvVGFyZ2V0T2JqZWN0cyIsInRoaXMiLCJ1bmJpbmRFdmVudHNGcm9tVGFyZ2V0T2JqZWN0cyIsInZhbGlkYXRlRGF0YVNjaGVtYSIsInNjaGVtYSIsImFycmF5IiwiYXJyYXlLZXkiLCJhcnJheVZhbHVlIiwiY29uc29sZSIsImxvZyIsIm5hbWUiLCJwdXNoIiwib2JqZWN0S2V5Iiwib2JqZWN0VmFsdWUiLCJbb2JqZWN0IE9iamVjdF0iLCJfZXZlbnRzIiwiZXZlbnRDYWxsYmFja3MiLCJldmVudENhbGxiYWNrR3JvdXAiLCJldmVudENhbGxiYWNrR3JvdXBOYW1lIiwidmFsdWVzIiwiQ2hhbm5lbHMiLCJfY2hhbm5lbHMiLCJjaGFubmVscyIsImNoYW5uZWxOYW1lIiwiQ2hhbm5lbCIsIl9yZXNwb25zZXMiLCJyZXNwb25zZXMiLCJyZXNwb25zZU5hbWUiLCJyZXNwb25zZUNhbGxiYWNrIiwicmVzcG9uc2UiLCJyZXF1ZXN0RGF0YSIsIl9yZXNwb25zZU5hbWUiLCJrZXlzIiwiQmFzZSIsInNldHRpbmdzIiwiY29uZmlndXJhdGlvbiIsInN1cGVyIiwiX2NvbmZpZ3VyYXRpb24iLCJfc2V0dGluZ3MiLCJfZW1pdHRlcnMiLCJlbWl0dGVycyIsIlNlcnZpY2UiLCJfZGVmYXVsdHMiLCJkZWZhdWx0cyIsImNvbnRlbnRUeXBlIiwiQ29udGVudC1UeXBlIiwicmVzcG9uc2VUeXBlIiwiX3Jlc3BvbnNlVHlwZXMiLCJfcmVzcG9uc2VUeXBlIiwiX3hociIsImZpbmQiLCJyZXNwb25zZVR5cGVJdGVtIiwiX3R5cGUiLCJ0eXBlIiwiX3VybCIsInVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsImhlYWRlciIsInNldFJlcXVlc3RIZWFkZXIiLCJfZGF0YSIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwiX2VuYWJsZWQiLCJlbmFibGVkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJzdGF0dXMiLCJhYm9ydCIsIm9wZW4iLCJvbmxvYWQiLCJvbmVycm9yIiwic2VuZCIsInRoZW4iLCJlbWl0IiwiY3VycmVudFRhcmdldCIsIk1vZGVsIiwiX2xvY2FsU3RvcmFnZSIsImxvY2FsU3RvcmFnZSIsIl9pc1NldHRpbmciLCJpc1NldHRpbmciLCJzZXQiLCJfc2NoZW1hIiwiX2hpc3Rpb2dyYW0iLCJoaXN0aW9ncmFtIiwiYXNzaWduIiwiX2hpc3RvcnkiLCJoaXN0b3J5IiwidW5zaGlmdCIsInBhcnNlIiwiX2RiIiwiZGIiLCJnZXRJdGVtIiwiZW5kcG9pbnQiLCJKU09OIiwic3RyaW5naWZ5Iiwic2V0SXRlbSIsIl9kYXRhRXZlbnRzIiwiZGF0YUV2ZW50cyIsIl9kYXRhQ2FsbGJhY2tzIiwiZGF0YUNhbGxiYWNrcyIsIl9zZXJ2aWNlcyIsInNlcnZpY2VzIiwiX3NlcnZpY2VFdmVudHMiLCJzZXJ2aWNlRXZlbnRzIiwiX3NlcnZpY2VDYWxsYmFja3MiLCJzZXJ2aWNlQ2FsbGJhY2tzIiwidW5iaW5kRXZlbnRzVG9UYXJnZXRPYmplY3RzIiwicHJvcGVydHkiLCJfYXJndW1lbnRzIiwiZm9yRWFjaCIsIl9yZWYiLCJpbmRleCIsImtleSIsInZhbHVlIiwic2V0RGF0YVByb3BlcnR5Iiwic2V0REIiLCJzaWxlbnQiLCJfa2V5IiwidW5zZXREYXRhUHJvcGVydHkiLCJfcmVmMiIsImRlZmluZVByb3BlcnRpZXMiLCJjb25maWd1cmFibGUiLCJzZXRWYWx1ZUV2ZW50TmFtZSIsInVuc2V0VmFsdWVFdmVudE5hbWUiLCJ1bnNldFZhbHVlIiwiZW5hYmxlU2VydmljZUV2ZW50cyIsImVuYWJsZURhdGFFdmVudHMiLCJkaXNhYmxlU2VydmljZUV2ZW50cyIsImRpc2FibGVEYXRhRXZlbnRzIiwiRW1pdHRlciIsIl9uYW1lIiwiRW1pdHRlcnMiLCJOYXZpZ2F0ZUVtaXR0ZXIiLCJhZGRTZXR0aW5ncyIsImVuYWJsZSIsIm9sZFVSTCIsIlN0cmluZyIsIm5ld1VSTCIsImN1cnJlbnRSb3V0ZSIsImN1cnJlbnRDb250cm9sbGVyIiwiVmlldyIsIl9lbGVtZW50TmFtZSIsIl9lbGVtZW50IiwidGFnTmFtZSIsImVsZW1lbnROYW1lIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiZWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlbGVtZW50T2JzZXJ2ZXIiLCJvYnNlcnZlIiwic3VidHJlZSIsImNoaWxkTGlzdCIsIl9hdHRyaWJ1dGVzIiwiYXR0cmlidXRlcyIsImF0dHJpYnV0ZUtleSIsImF0dHJpYnV0ZVZhbHVlIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiX3VpIiwidWkiLCJ1aUtleSIsInVpVmFsdWUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3VpRXZlbnRzIiwidWlFdmVudHMiLCJfdWlDYWxsYmFja3MiLCJ1aUNhbGxiYWNrcyIsIl9vYnNlcnZlckNhbGxiYWNrcyIsIm9ic2VydmVyQ2FsbGJhY2tzIiwiX2VsZW1lbnRPYnNlcnZlciIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJlbGVtZW50T2JzZXJ2ZSIsImJpbmQiLCJfaW5zZXJ0IiwiaW5zZXJ0IiwiX3RlbXBsYXRlcyIsInRlbXBsYXRlcyIsIm11dGF0aW9uUmVjb3JkTGlzdCIsIm9ic2VydmVyIiwibXV0YXRpb25SZWNvcmRJbmRleCIsIm11dGF0aW9uUmVjb3JkIiwibXV0YXRpb25SZWNvcmRDYXRlZ29yeSIsInJlc2V0VUkiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJtZXRob2QiLCJwYXJlbnRFbGVtZW50IiwicmVtb3ZlQ2hpbGQiLCJkaXNhYmxlVUkiLCJlbmFibGVVSSIsImVuYWJsZVVJRXZlbnRzIiwiZGlzYWJsZVVJRXZlbnRzIiwiZW5hYmxlRW1pdHRlcnMiLCJlbmFibGVFbGVtZW50IiwiZGlzYWJsZUVsZW1lbnQiLCJkaXNhYmxlRW1pdHRlcnMiLCJ0aGlzcyIsIkNvbnRyb2xsZXIiLCJfZW1pdHRlckNhbGxiYWNrcyIsImVtaXR0ZXJDYWxsYmFja3MiLCJfbW9kZWxDYWxsYmFja3MiLCJtb2RlbENhbGxiYWNrcyIsIl92aWV3Q2FsbGJhY2tzIiwidmlld0NhbGxiYWNrcyIsIl9jb250cm9sbGVyQ2FsbGJhY2tzIiwiY29udHJvbGxlckNhbGxiYWNrcyIsIl9tb2RlbHMiLCJtb2RlbHMiLCJfdmlld3MiLCJ2aWV3cyIsIl9jb250cm9sbGVycyIsImNvbnRyb2xsZXJzIiwiX3JvdXRlcnMiLCJyb3V0ZXJzIiwiX3JvdXRlckV2ZW50cyIsInJvdXRlckV2ZW50cyIsIl9yb3V0ZXJDYWxsYmFja3MiLCJyb3V0ZXJDYWxsYmFja3MiLCJfZW1pdHRlckV2ZW50cyIsImVtaXR0ZXJFdmVudHMiLCJfbW9kZWxFdmVudHMiLCJtb2RlbEV2ZW50cyIsIl92aWV3RXZlbnRzIiwidmlld0V2ZW50cyIsIl9jb250cm9sbGVyRXZlbnRzIiwiY29udHJvbGxlckV2ZW50cyIsImVuYWJsZUVtaXR0ZXJFdmVudHMiLCJlbmFibGVSb3V0ZXJFdmVudHMiLCJlbmFibGVNb2RlbEV2ZW50cyIsImVuYWJsZVZpZXdFdmVudHMiLCJlbmFibGVDb250cm9sbGVyRXZlbnRzIiwiZGlzYWJsZUVtaXR0ZXJFdmVudHMiLCJkaXNhYmxlUm91dGVyRXZlbnRzIiwiZGlzYWJsZU1vZGVsRXZlbnRzIiwiZGlzYWJsZVZpZXdFdmVudHMiLCJkaXNhYmxlQ29udHJvbGxlckV2ZW50cyIsIlJvdXRlciIsInJvdXRlIiwiX2hhc2giLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhhc2giLCJwb3AiLCJwYXRobmFtZSIsIl9yb3V0ZXMiLCJyb3V0ZXMiLCJfY29udHJvbGxlciIsImNvbnRyb2xsZXIiLCJfcHJldmlvdXNVUkwiLCJwcmV2aW91c1VSTCIsIl9jdXJyZW50VVJMIiwiY3VycmVudFVSTCIsImZyYWdtZW50SURSZWdFeHAiLCJlbmFibGVFdmVudHMiLCJlbmFibGVSb3V0ZXMiLCJyb3V0ZUNoYW5nZSIsImRpc2FibGVFdmVudHMiLCJkaXNhYmxlUm91dGVzIiwicm91dGVJbmRleCIsIm9yaWdpbmFsUm91dGVzIiwicm91dGVQYXRoIiwicm91dGVDYWxsYmFjayIsIm5hdmlnYXRlRW1pdHRlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZmlsdGVyIiwicm91dGVDb250cm9sbGVyRGF0YSIsInJvdXRlclBhdGgiLCJyb3V0ZXJDb250cm9sbGVyIiwidW5kZWZpbmVkIiwicmVwbGFjZSIsImZyYWdtZW50TmFtZVJlZ0V4cCIsInRlc3QiLCJocmVmIiwicm91dGVDb250cm9sbGVyIiwibmF2aWdhdGVFbWl0dGVyRGF0YSIsImVtaXNzaW9uIiwiZXJyb3IiLCJwYXRoIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxJQUFNQSxLQUFPLEdBQ2pCQSxJQUFJQyxVQUFZLEdBQ2hCRCxJQUFJRSxNQUFRRixJQUFJQyxVQUNoQkQsSUFBSUMsVUFBVUUsT0FBUyxHQUN2QkgsSUFBSUUsTUFBTUUsR0FBS0osSUFBSUMsVUFBVUUsT0FDN0JILElBQUlLLFVBQVksQ0FDZEMsbUNBQW9DLFNBQXdDQyxHQUMxRSxNQUFPLENBQUMsNEVBQTRFQyxLQUFLLE9BRTNGQyxtQkFBb0IsU0FBNEJGLEdBQzlDLE1BQU8sQ0FBQyw0Q0FBNENDLEtBQUssT0FFM0RFLG9CQUFxQixTQUE2QkgsR0FDaEQsQ0FBQyxxREFBdURDLEtBQUss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NlAsa0JBRWhCM1IsRUFBV0EsRUFBUzZTLFFBQVEsSUFBSW5TLE9BQU8sSUFBSyxNQUFPLE9BQ25EVixFQUFXOEIsS0FBS2dSLG1CQUFtQjlTLEtBS3ZCLEtBRmRLLEVBQVFMLEVBQVMrUyxLQUFLbkMsRUFBTTNRLE1BRU5BLElBQWtCMlEsRUFBTTNSLE9BQVMsR0FDckQsT0FBTzBULElBR1YsS0FFSixHQUVILElBQ003USxLQUFLNFAsYUFBWTVQLEtBQUt5UCxhQUFlelAsS0FBSzRQLFlBQzlDNVAsS0FBSzJQLFlBQWNYLE9BQU9DLFNBQVNpQyxLQUNUUCxFQUFvQixHQUE5QyxJQUNJUSxFQUFrQlIsRUFBb0IsR0FDdENKLEVBQWtCdlEsS0FBS3VDLFNBQVNnTyxnQkFDaENhLEVBQXNCLENBQ3hCeEIsV0FBWTVQLEtBQUs0UCxXQUNqQkYsWUFBYTFQLEtBQUswUCxZQUNsQi9HLGFBQWMzSSxLQUFLOE8sTUFDbkJsRyxrQkFBbUJ1SSxFQUFnQjFRLE1BRXJDOFAsRUFBZ0J0TCxJQUFJbU0sR0FDcEJwUixLQUFLMEUsS0FBSzZMLEVBQWdCOVAsS0FBTThQLEVBQWdCYyxZQUNoREYsRUFBZ0JaLEVBQWdCYyxZQUNoQyxNQUFPQyxHQUNQLEtBQU0sMEJBSVZ6USxTQUFTMFEsR0FDUHZDLE9BQU9DLFNBQVNDLEtBQU9xQyIsInNvdXJjZXNDb250ZW50IjpbInZhciBNVkMgPSBNVkMgfHwge31cclxuIiwiTVZDLkNvbnN0YW50cyA9IHt9XG5NVkMuQ09OU1QgPSBNVkMuQ29uc3RhbnRzXG4iLCJNVkMuRXZlbnRzID0gY2xhc3Mge1xyXG4gIGNvbnN0cnVjdG9yKCkge31cclxuICBnZXQgX2V2ZW50cygpIHtcclxuICAgIHRoaXMuZXZlbnRzID0gKHRoaXMuZXZlbnRzKVxyXG4gICAgICA/IHRoaXMuZXZlbnRzXHJcbiAgICAgIDoge31cclxuICAgIHJldHVybiB0aGlzLmV2ZW50c1xyXG4gIH1cclxuICBldmVudENhbGxiYWNrcyhldmVudE5hbWUpIHsgcmV0dXJuIHRoaXMuX2V2ZW50c1tldmVudE5hbWVdIHx8IHt9IH1cclxuICBldmVudENhbGxiYWNrTmFtZShldmVudENhbGxiYWNrKSB7XHJcbiAgICByZXR1cm4gKGV2ZW50Q2FsbGJhY2submFtZS5sZW5ndGgpXHJcbiAgICAgID8gZXZlbnRDYWxsYmFjay5uYW1lXHJcbiAgICAgIDogJ2Fub255bW91c0Z1bmN0aW9uJ1xyXG4gIH1cclxuICBldmVudENhbGxiYWNrR3JvdXAoZXZlbnRDYWxsYmFja3MsIGV2ZW50Q2FsbGJhY2tOYW1lKSB7XHJcbiAgICByZXR1cm4gZXZlbnRDYWxsYmFja3NbZXZlbnRDYWxsYmFja05hbWVdIHx8IFtdXHJcbiAgfVxyXG4gIG9uKGV2ZW50TmFtZSwgZXZlbnRDYWxsYmFjaykge1xyXG4gICAgbGV0IGV2ZW50Q2FsbGJhY2tzID0gdGhpcy5ldmVudENhbGxiYWNrcyhldmVudE5hbWUpXHJcbiAgICBsZXQgZXZlbnRDYWxsYmFja05hbWUgPSB0aGlzLmV2ZW50Q2FsbGJhY2tOYW1lKGV2ZW50Q2FsbGJhY2spXHJcbiAgICBsZXQgZXZlbnRDYWxsYmFja0dyb3VwID0gdGhpcy5ldmVudENhbGxiYWNrR3JvdXAoZXZlbnRDYWxsYmFja3MsIGV2ZW50Q2FsbGJhY2tOYW1lKVxyXG4gICAgZXZlbnRDYWxsYmFja0dyb3VwLnB1c2goZXZlbnRDYWxsYmFjaylcclxuICAgIGV2ZW50Q2FsbGJhY2tzW2V2ZW50Q2FsbGJhY2tOYW1lXSA9IGV2ZW50Q2FsbGJhY2tHcm91cFxyXG4gICAgdGhpcy5fZXZlbnRzW2V2ZW50TmFtZV0gPSBldmVudENhbGxiYWNrc1xyXG4gIH1cclxuICBvZmYoKSB7XHJcbiAgICBzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICBjYXNlIDE6XHJcbiAgICAgICAgdmFyIGV2ZW50TmFtZSA9IGFyZ3VtZW50c1swXVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbZXZlbnROYW1lXVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgMjpcclxuICAgICAgICB2YXIgZXZlbnROYW1lID0gYXJndW1lbnRzWzBdXHJcbiAgICAgICAgdmFyIGV2ZW50Q2FsbGJhY2sgPSBhcmd1bWVudHNbMV1cclxuICAgICAgICB2YXIgZXZlbnRDYWxsYmFja05hbWUgPSB0aGlzLmV2ZW50Q2FsbGJhY2tOYW1lKGV2ZW50Q2FsbGJhY2spXHJcbiAgICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1tldmVudE5hbWVdW2V2ZW50Q2FsbGJhY2tOYW1lXVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcbiAgfVxyXG4gIGVtaXQoZXZlbnROYW1lLCBldmVudERhdGEpIHtcclxuICAgIGxldCBldmVudENhbGxiYWNrcyA9IHRoaXMuZXZlbnRDYWxsYmFja3MoZXZlbnROYW1lKVxyXG4gICAgZm9yKGxldCBbZXZlbnRDYWxsYmFja0dyb3VwTmFtZSwgZXZlbnRDYWxsYmFja0dyb3VwXSBvZiBPYmplY3QuZW50cmllcyhldmVudENhbGxiYWNrcykpIHtcclxuICAgICAgZm9yKGxldCBldmVudENhbGxiYWNrIG9mIGV2ZW50Q2FsbGJhY2tHcm91cCkge1xyXG4gICAgICAgIGxldCBhZGRpdGlvbmFsQXJndW1lbnRzID0gT2JqZWN0LnZhbHVlcyhhcmd1bWVudHMpLnNwbGljZSgyKVxyXG4gICAgICAgIGV2ZW50Q2FsbGJhY2soZXZlbnREYXRhLCAuLi5hZGRpdGlvbmFsQXJndW1lbnRzKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIk1WQy5UZW1wbGF0ZXMgPSB7XHJcbiAgT2JqZWN0UXVlcnlTdHJpbmdGb3JtYXRJbnZhbGlkUm9vdDogZnVuY3Rpb24gT2JqZWN0UXVlcnlTdHJpbmdGb3JtYXRJbnZhbGlkKGRhdGEpIHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICdPYmplY3QgUXVlcnkgXCJzdHJpbmdcIiBwcm9wZXJ0eSBtdXN0IGJlIGZvcm1hdHRlZCB0byBmaXJzdCBpbmNsdWRlIFwiW0BdXCIuJ1xyXG4gICAgXS5qb2luKCdcXG4nKVxyXG4gIH0sXHJcbiAgRGF0YVNjaGVtYU1pc21hdGNoOiBmdW5jdGlvbiBEYXRhU2NoZW1hTWlzbWF0Y2goZGF0YSkge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgYERhdGEgYW5kIFNjaGVtYSBwcm9wZXJ0aWVzIGRvIG5vdCBtYXRjaC5gXHJcbiAgICBdLmpvaW4oJ1xcbicpXHJcbiAgfSxcclxuICBEYXRhRnVuY3Rpb25JbnZhbGlkOiBmdW5jdGlvbiBEYXRhRnVuY3Rpb25JbnZhbGlkKGRhdGEpIHtcclxuICAgIFtcclxuICAgICAgYE1vZGVsIERhdGEgcHJvcGVydHkgdHlwZSBcIkZ1bmN0aW9uXCIgaXMgbm90IHZhbGlkLmBcclxuICAgIF0uam9pbignXFxuJylcclxuICB9LFxyXG4gIERhdGFVbmRlZmluZWQ6IGZ1bmN0aW9uIERhdGFVbmRlZmluZWQoZGF0YSkge1xyXG4gICAgW1xyXG4gICAgICBgTW9kZWwgRGF0YSBwcm9wZXJ0eSB1bmRlZmluZWQuYFxyXG4gICAgXS5qb2luKCdcXG4nKVxyXG4gIH0sXHJcbiAgU2NoZW1hVW5kZWZpbmVkOiBmdW5jdGlvbiBTY2hlbWFVbmRlZmluZWQoZGF0YSkge1xyXG4gICAgW1xyXG4gICAgICBgTW9kZWwgXCJTY2hlbWFcIiB1bmRlZmluZWQuYFxyXG4gICAgXS5qb2luKCdcXG4nKVxyXG4gIH0sXHJcbn1cclxuTVZDLlRNUEwgPSBNVkMuVGVtcGxhdGVzXHJcbiIsIk1WQy5VdGlscyA9IHt9XHJcbiIsIk1WQy5VdGlscy5pc0FycmF5ID0gZnVuY3Rpb24gaXNBcnJheShvYmplY3QpIHsgcmV0dXJuIEFycmF5LmlzQXJyYXkob2JqZWN0KSB9XHJcbk1WQy5VdGlscy5pc09iamVjdCA9IGZ1bmN0aW9uIGlzT2JqZWN0KG9iamVjdCkge1xyXG4gIHJldHVybiAoIUFycmF5LmlzQXJyYXkob2JqZWN0KSlcclxuICAgID8gdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCdcclxuICAgIDogZmFsc2VcclxufVxyXG5NVkMuVXRpbHMuaXNFcXVhbFR5cGUgPSBmdW5jdGlvbiBpc0VxdWFsVHlwZSh2YWx1ZUEsIHZhbHVlQikgeyByZXR1cm4gdmFsdWVBID09PSB2YWx1ZUIgfVxyXG5NVkMuVXRpbHMuaXNIVE1MRWxlbWVudCA9IGZ1bmN0aW9uIGlzSFRNTEVsZW1lbnQob2JqZWN0KSB7XHJcbiAgcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XHJcbn1cclxuIiwiTVZDLlV0aWxzLnR5cGVPZiA9ICBmdW5jdGlvbiB0eXBlT2YoZGF0YSkge1xyXG4gIHN3aXRjaCh0eXBlb2YgZGF0YSkge1xyXG4gICAgY2FzZSAnb2JqZWN0JzpcclxuICAgICAgbGV0IF9vYmplY3RcclxuICAgICAgaWYoTVZDLlV0aWxzLmlzQXJyYXkoZGF0YSkpIHtcclxuICAgICAgICAvLyBBcnJheVxyXG4gICAgICAgIHJldHVybiAnYXJyYXknXHJcbiAgICAgIH0gZWxzZSBpZihcclxuICAgICAgICBNVkMuVXRpbHMuaXNPYmplY3QoZGF0YSlcclxuICAgICAgKSB7XHJcbiAgICAgICAgLy8gT2JqZWN0XHJcbiAgICAgICAgcmV0dXJuICdvYmplY3QnXHJcbiAgICAgIH0gZWxzZSBpZihcclxuICAgICAgICBkYXRhID09PSBudWxsXHJcbiAgICAgICkge1xyXG4gICAgICAgIC8vIE51bGxcclxuICAgICAgICByZXR1cm4gJ251bGwnXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIF9vYmplY3RcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ3N0cmluZyc6XHJcbiAgICBjYXNlICdudW1iZXInOlxyXG4gICAgY2FzZSAnYm9vbGVhbic6XHJcbiAgICBjYXNlICd1bmRlZmluZWQnOlxyXG4gICAgY2FzZSAnZnVuY3Rpb24nOlxyXG4gICAgICByZXR1cm4gdHlwZW9mIGRhdGFcclxuICAgICAgYnJlYWtcclxuICB9XHJcbn1cclxuIiwiTVZDLlV0aWxzLmFkZFByb3BlcnRpZXNUb09iamVjdCA9IGZ1bmN0aW9uIGFkZFByb3BlcnRpZXNUb09iamVjdCgpIHtcclxuICBsZXQgdGFyZ2V0T2JqZWN0XHJcbiAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpIHtcclxuICAgIGNhc2UgMjpcclxuICAgICAgbGV0IHByb3BlcnRpZXMgPSBhcmd1bWVudHNbMF1cclxuICAgICAgdGFyZ2V0T2JqZWN0ID0gYXJndW1lbnRzWzFdXHJcbiAgICAgIGZvcihsZXQgW3Byb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocHJvcGVydGllcykpIHtcclxuICAgICAgICB0YXJnZXRPYmplY3RbcHJvcGVydHlOYW1lXSA9IHByb3BlcnR5VmFsdWVcclxuICAgICAgfVxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAzOlxyXG4gICAgICBsZXQgcHJvcGVydHlOYW1lID0gYXJndW1lbnRzWzBdXHJcbiAgICAgIGxldCBwcm9wZXJ0eVZhbHVlID0gYXJndW1lbnRzWzFdXHJcbiAgICAgIHRhcmdldE9iamVjdCA9IGFyZ3VtZW50c1syXVxyXG4gICAgICB0YXJnZXRPYmplY3RbcHJvcGVydHlOYW1lXSA9IHByb3BlcnR5VmFsdWVcclxuICAgICAgYnJlYWtcclxuICB9XHJcbiAgcmV0dXJuIHRhcmdldE9iamVjdFxyXG59XHJcbiIsIk1WQy5VdGlscy5vYmplY3RRdWVyeSA9IGZ1bmN0aW9uIG9iamVjdFF1ZXJ5KFxyXG4gIHN0cmluZyxcclxuICBjb250ZXh0XHJcbikge1xyXG4gIGxldCBzdHJpbmdEYXRhID0gTVZDLlV0aWxzLm9iamVjdFF1ZXJ5LnBhcnNlTm90YXRpb24oc3RyaW5nKVxyXG4gIGlmKHN0cmluZ0RhdGFbMF0gPT09ICdAJykgc3RyaW5nRGF0YS5zcGxpY2UoMCwgMSlcclxuICBpZighc3RyaW5nRGF0YS5sZW5ndGgpIHJldHVybiBjb250ZXh0XHJcbiAgY29udGV4dCA9IChNVkMuVXRpbHMuaXNPYmplY3QoY29udGV4dCkpXHJcbiAgICA/IE9iamVjdC5lbnRyaWVzKGNvbnRleHQpXHJcbiAgICA6IGNvbnRleHRcclxuICByZXR1cm4gc3RyaW5nRGF0YS5yZWR1Y2UoKG9iamVjdCwgZnJhZ21lbnQsIGZyYWdtZW50SW5kZXgsIGZyYWdtZW50cykgPT4ge1xyXG4gICAgbGV0IHByb3BlcnRpZXMgPSBbXVxyXG4gICAgZnJhZ21lbnQgPSBNVkMuVXRpbHMub2JqZWN0UXVlcnkucGFyc2VGcmFnbWVudChmcmFnbWVudClcclxuICAgIGZvcihsZXQgW3Byb3BlcnR5S2V5LCBwcm9wZXJ0eVZhbHVlXSBvZiBvYmplY3QpIHtcclxuICAgICAgaWYocHJvcGVydHlLZXkubWF0Y2goZnJhZ21lbnQpKSB7XHJcbiAgICAgICAgaWYoZnJhZ21lbnRJbmRleCA9PT0gZnJhZ21lbnRzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzLmNvbmNhdChbW3Byb3BlcnR5S2V5LCBwcm9wZXJ0eVZhbHVlXV0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzLmNvbmNhdChPYmplY3QuZW50cmllcyhwcm9wZXJ0eVZhbHVlKSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIG9iamVjdCA9IHByb3BlcnRpZXNcclxuICAgIHJldHVybiBvYmplY3RcclxuICB9LCBjb250ZXh0KVxyXG59XHJcbk1WQy5VdGlscy5vYmplY3RRdWVyeS5wYXJzZU5vdGF0aW9uID0gZnVuY3Rpb24gcGFyc2VOb3RhdGlvbihzdHJpbmcpIHtcclxuICBpZihcclxuICAgIHN0cmluZy5jaGFyQXQoMCkgPT09ICdbJyAmJlxyXG4gICAgc3RyaW5nLmNoYXJBdChzdHJpbmcubGVuZ3RoIC0gMSkgPT0gJ10nXHJcbiAgKSB7XHJcbiAgICBzdHJpbmcgPSBzdHJpbmdcclxuICAgICAgLnNsaWNlKDEsIC0xKVxyXG4gICAgICAuc3BsaXQoJ11bJylcclxuICB9IGVsc2Uge1xyXG4gICAgc3RyaW5nID0gc3RyaW5nXHJcbiAgICAgIC5zcGxpdCgnLicpXHJcbiAgfVxyXG4gIHJldHVybiBzdHJpbmdcclxufVxyXG5NVkMuVXRpbHMub2JqZWN0UXVlcnkucGFyc2VGcmFnbWVudCA9IGZ1bmN0aW9uIHBhcnNlRnJhZ21lbnQoZnJhZ21lbnQpIHtcclxuICBpZihcclxuICAgIGZyYWdtZW50LmNoYXJBdCgwKSA9PT0gJy8nICYmXHJcbiAgICBmcmFnbWVudC5jaGFyQXQoZnJhZ21lbnQubGVuZ3RoIC0gMSkgPT0gJy8nXHJcbiAgKSB7XHJcbiAgICBmcmFnbWVudCA9IGZyYWdtZW50LnNsaWNlKDEsIC0xKVxyXG4gICAgZnJhZ21lbnQgPSBuZXcgUmVnRXhwKCdeJy5jb25jYXQoZnJhZ21lbnQsICckJykpXHJcbiAgfVxyXG4gIHJldHVybiBmcmFnbWVudFxyXG59XHJcbiIsIk1WQy5VdGlscy50b2dnbGVFdmVudHNGb3JUYXJnZXRPYmplY3RzID0gZnVuY3Rpb24gdG9nZ2xlRXZlbnRzRm9yVGFyZ2V0T2JqZWN0cyhcclxuICB0b2dnbGVNZXRob2QsXHJcbiAgZXZlbnRzLFxyXG4gIHRhcmdldE9iamVjdHMsXHJcbiAgY2FsbGJhY2tzXHJcbikge1xyXG4gIGZvcihsZXQgW2V2ZW50U2V0dGluZ3MsIGV2ZW50Q2FsbGJhY2tOYW1lXSBvZiBPYmplY3QuZW50cmllcyhldmVudHMpKSB7XHJcbiAgICBsZXQgZXZlbnREYXRhID0gZXZlbnRTZXR0aW5ncy5zcGxpdCgnICcpXHJcbiAgICBsZXQgZXZlbnRUYXJnZXRTZXR0aW5ncyA9IGV2ZW50RGF0YVswXVxyXG4gICAgbGV0IGV2ZW50TmFtZSA9IGV2ZW50RGF0YVsxXVxyXG4gICAgbGV0IGV2ZW50VGFyZ2V0cyA9IE1WQy5VdGlscy5vYmplY3RRdWVyeShcclxuICAgICAgZXZlbnRUYXJnZXRTZXR0aW5ncyxcclxuICAgICAgdGFyZ2V0T2JqZWN0c1xyXG4gICAgKVxyXG4gICAgZXZlbnRUYXJnZXRzID0gKCFNVkMuVXRpbHMuaXNBcnJheShldmVudFRhcmdldHMpKVxyXG4gICAgICA/IFtbJ0AnLCBldmVudFRhcmdldHNdXVxyXG4gICAgICA6IGV2ZW50VGFyZ2V0c1xyXG4gICAgZm9yKGxldCBbZXZlbnRUYXJnZXROYW1lLCBldmVudFRhcmdldF0gb2YgZXZlbnRUYXJnZXRzKSB7XHJcbiAgICAgIGxldCBldmVudE1ldGhvZE5hbWUgPSAodG9nZ2xlTWV0aG9kID09PSAnb24nKVxyXG4gICAgICA/IChcclxuICAgICAgICBldmVudFRhcmdldCBpbnN0YW5jZW9mIE5vZGVMaXN0IHx8XHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgZXZlbnRUYXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fFxyXG4gICAgICAgICAgZXZlbnRUYXJnZXQgaW5zdGFuY2VvZiBEb2N1bWVudFxyXG4gICAgICAgIClcclxuICAgICAgKSA/ICdhZGRFdmVudExpc3RlbmVyJ1xyXG4gICAgICAgIDogJ29uJ1xyXG4gICAgICA6IChcclxuICAgICAgICBldmVudFRhcmdldCBpbnN0YW5jZW9mIE5vZGVMaXN0IHx8XHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgZXZlbnRUYXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fFxyXG4gICAgICAgICAgZXZlbnRUYXJnZXQgaW5zdGFuY2VvZiBEb2N1bWVudFxyXG4gICAgICAgIClcclxuICAgICAgKSA/ICdyZW1vdmVFdmVudExpc3RlbmVyJ1xyXG4gICAgICAgIDogJ29mZidcclxuICAgICAgbGV0IGV2ZW50Q2FsbGJhY2sgPSBNVkMuVXRpbHMub2JqZWN0UXVlcnkoXHJcbiAgICAgICAgZXZlbnRDYWxsYmFja05hbWUsXHJcbiAgICAgICAgY2FsbGJhY2tzXHJcbiAgICAgIClbMF1bMV1cclxuICAgICAgaWYoZXZlbnRUYXJnZXQgaW5zdGFuY2VvZiBOb2RlTGlzdCkge1xyXG4gICAgICAgIGZvcihsZXQgX2V2ZW50VGFyZ2V0IG9mIGV2ZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgICBfZXZlbnRUYXJnZXRbZXZlbnRNZXRob2ROYW1lXShldmVudE5hbWUsIGV2ZW50Q2FsbGJhY2spXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYoZXZlbnRUYXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCl7XHJcbiAgICAgICAgZXZlbnRUYXJnZXRbZXZlbnRNZXRob2ROYW1lXShldmVudE5hbWUsIGV2ZW50Q2FsbGJhY2spXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZXZlbnRUYXJnZXRbZXZlbnRNZXRob2ROYW1lXShldmVudE5hbWUsIGV2ZW50Q2FsbGJhY2spXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuTVZDLlV0aWxzLmJpbmRFdmVudHNUb1RhcmdldE9iamVjdHMgPSBmdW5jdGlvbiBiaW5kRXZlbnRzVG9UYXJnZXRPYmplY3RzKCkge1xyXG4gIHRoaXMudG9nZ2xlRXZlbnRzRm9yVGFyZ2V0T2JqZWN0cygnb24nLCAuLi5hcmd1bWVudHMpXHJcbn1cclxuTVZDLlV0aWxzLnVuYmluZEV2ZW50c0Zyb21UYXJnZXRPYmplY3RzID0gZnVuY3Rpb24gdW5iaW5kRXZlbnRzRnJvbVRhcmdldE9iamVjdHMoKSB7XHJcbiAgdGhpcy50b2dnbGVFdmVudHNGb3JUYXJnZXRPYmplY3RzKCdvZmYnLCAuLi5hcmd1bWVudHMpXHJcbn1cclxuIiwiTVZDLlV0aWxzLnZhbGlkYXRlRGF0YVNjaGVtYSA9IGZ1bmN0aW9uIHZhbGlkYXRlRGF0YVNjaGVtYShkYXRhLCBzY2hlbWEpIHtcclxuICBpZihzY2hlbWEpIHtcclxuICAgIHN3aXRjaChNVkMuVXRpbHMudHlwZU9mKGRhdGEpKSB7XHJcbiAgICAgIGNhc2UgJ2FycmF5JzpcclxuICAgICAgICBsZXQgYXJyYXkgPSBbXVxyXG4gICAgICAgIHNjaGVtYSA9IChNVkMuVXRpbHMudHlwZU9mKHNjaGVtYSkgPT09ICdmdW5jdGlvbicpXHJcbiAgICAgICAgICA/IHNjaGVtYSgpXHJcbiAgICAgICAgICA6IHNjaGVtYVxyXG4gICAgICAgIGlmKFxyXG4gICAgICAgICAgTVZDLlV0aWxzLmlzRXF1YWxUeXBlKFxyXG4gICAgICAgICAgICBNVkMuVXRpbHMudHlwZU9mKHNjaGVtYSksXHJcbiAgICAgICAgICAgIE1WQy5VdGlscy50eXBlT2YoYXJyYXkpXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhzY2hlbWEubmFtZSlcclxuICAgICAgICAgIGZvcihsZXQgW2FycmF5S2V5LCBhcnJheVZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xyXG4gICAgICAgICAgICBhcnJheS5wdXNoKFxyXG4gICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVEYXRhU2NoZW1hKGFycmF5VmFsdWUpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFycmF5XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnb2JqZWN0JzpcclxuICAgICAgICBsZXQgb2JqZWN0ID0ge31cclxuICAgICAgICBzY2hlbWEgPSAoTVZDLlV0aWxzLnR5cGVPZihzY2hlbWEpID09PSAnZnVuY3Rpb24nKVxyXG4gICAgICAgICAgPyBzY2hlbWEoKVxyXG4gICAgICAgICAgOiBzY2hlbWFcclxuICAgICAgICBpZihcclxuICAgICAgICAgIE1WQy5VdGlscy5pc0VxdWFsVHlwZShcclxuICAgICAgICAgICAgTVZDLlV0aWxzLnR5cGVPZihzY2hlbWEpLFxyXG4gICAgICAgICAgICBNVkMuVXRpbHMudHlwZU9mKG9iamVjdClcclxuICAgICAgICAgIClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHNjaGVtYS5uYW1lKVxyXG4gICAgICAgICAgZm9yKGxldCBbb2JqZWN0S2V5LCBvYmplY3RWYWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHtcclxuICAgICAgICAgICAgb2JqZWN0W29iamVjdEtleV0gPSB0aGlzLnZhbGlkYXRlRGF0YVNjaGVtYShvYmplY3RWYWx1ZSwgc2NoZW1hW29iamVjdEtleV0pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvYmplY3RcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdzdHJpbmcnOlxyXG4gICAgICBjYXNlICdudW1iZXInOlxyXG4gICAgICBjYXNlICdib29sZWFuJzpcclxuICAgICAgICBzY2hlbWEgPSAoTVZDLlV0aWxzLnR5cGVPZihzY2hlbWEpID09PSAnZnVuY3Rpb24nKVxyXG4gICAgICAgICAgPyBzY2hlbWEoKVxyXG4gICAgICAgICAgOiBzY2hlbWFcclxuICAgICAgICBpZihcclxuICAgICAgICAgIE1WQy5VdGlscy5pc0VxdWFsVHlwZShcclxuICAgICAgICAgICAgTVZDLlV0aWxzLnR5cGVPZihzY2hlbWEpLFxyXG4gICAgICAgICAgICBNVkMuVXRpbHMudHlwZU9mKGRhdGEpXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhzY2hlbWEubmFtZSlcclxuICAgICAgICAgIHJldHVybiBkYXRhXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRocm93IE1WQy5UTVBMXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ251bGwnOlxyXG4gICAgICAgIGlmKFxyXG4gICAgICAgICAgTVZDLlV0aWxzLmlzRXF1YWxUeXBlKFxyXG4gICAgICAgICAgICBNVkMuVXRpbHMudHlwZU9mKHNjaGVtYSksXHJcbiAgICAgICAgICAgIE1WQy5VdGlscy50eXBlT2YoZGF0YSlcclxuICAgICAgICAgIClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHJldHVybiBkYXRhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ3VuZGVmaW5lZCc6XHJcbiAgICAgICAgdGhyb3cgTVZDLlRNUExcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdmdW5jdGlvbic6XHJcbiAgICAgICAgdGhyb3cgTVZDLlRNUExcclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICB0aHJvdyBNVkMuVE1QTFxyXG4gIH1cclxufVxyXG4iLCJNVkMuQ2hhbm5lbHMgPSBjbGFzcyB7XHJcbiAgY29uc3RydWN0b3IoKSB7fVxyXG4gIGdldCBfY2hhbm5lbHMoKSB7XHJcbiAgICB0aGlzLmNoYW5uZWxzID0gKHRoaXMuY2hhbm5lbHMpXHJcbiAgICAgID8gdGhpcy5jaGFubmVsc1xyXG4gICAgICA6IHt9XHJcbiAgICByZXR1cm4gdGhpcy5jaGFubmVsc1xyXG4gIH1cclxuICBjaGFubmVsKGNoYW5uZWxOYW1lKSB7XHJcbiAgICB0aGlzLl9jaGFubmVsc1tjaGFubmVsTmFtZV0gPSAodGhpcy5fY2hhbm5lbHNbY2hhbm5lbE5hbWVdKVxyXG4gICAgICA/IHRoaXMuX2NoYW5uZWxzW2NoYW5uZWxOYW1lXVxyXG4gICAgICA6IG5ldyBNVkMuQ2hhbm5lbHMuQ2hhbm5lbCgpXHJcbiAgICByZXR1cm4gdGhpcy5fY2hhbm5lbHNbY2hhbm5lbE5hbWVdXHJcbiAgfVxyXG4gIG9mZihjaGFubmVsTmFtZSkge1xyXG4gICAgZGVsZXRlIHRoaXMuX2NoYW5uZWxzW2NoYW5uZWxOYW1lXVxyXG4gIH1cclxufVxyXG4iLCJNVkMuQ2hhbm5lbHMuQ2hhbm5lbCA9IGNsYXNzIHtcclxuICBjb25zdHJ1Y3RvcigpIHt9XHJcbiAgZ2V0IF9yZXNwb25zZXMoKSB7XHJcbiAgICB0aGlzLnJlc3BvbnNlcyA9ICh0aGlzLnJlc3BvbnNlcylcclxuICAgICAgPyB0aGlzLnJlc3BvbnNlc1xyXG4gICAgICA6IHt9XHJcbiAgICByZXR1cm4gdGhpcy5yZXNwb25zZXNcclxuICB9XHJcbiAgcmVzcG9uc2UocmVzcG9uc2VOYW1lLCByZXNwb25zZUNhbGxiYWNrKSB7XHJcbiAgICBpZihyZXNwb25zZUNhbGxiYWNrKSB7XHJcbiAgICAgIHRoaXMuX3Jlc3BvbnNlc1tyZXNwb25zZU5hbWVdID0gcmVzcG9uc2VDYWxsYmFja1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3Jlc3BvbnNlc1tyZXNwb25zZV1cclxuICAgIH1cclxuICB9XHJcbiAgcmVxdWVzdChyZXNwb25zZU5hbWUsIHJlcXVlc3REYXRhKSB7XHJcbiAgICBpZih0aGlzLl9yZXNwb25zZXNbcmVzcG9uc2VOYW1lXSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fcmVzcG9uc2VzW3Jlc3BvbnNlTmFtZV0ocmVxdWVzdERhdGEpXHJcbiAgICB9XHJcbiAgfVxyXG4gIG9mZihyZXNwb25zZU5hbWUpIHtcclxuICAgIGlmKHJlc3BvbnNlTmFtZSkge1xyXG4gICAgICBkZWxldGUgdGhpcy5fcmVzcG9uc2VzW3Jlc3BvbnNlTmFtZV1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZvcihsZXQgW3Jlc3BvbnNlTmFtZV0gb2YgT2JqZWN0LmtleXModGhpcy5fcmVzcG9uc2VzKSkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLl9yZXNwb25zZXNbcmVzcG9uc2VOYW1lXVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIk1WQy5CYXNlID0gY2xhc3MgZXh0ZW5kcyBNVkMuRXZlbnRzIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgY29uZmlndXJhdGlvbikge1xyXG4gICAgc3VwZXIoKVxyXG4gICAgaWYoY29uZmlndXJhdGlvbikgdGhpcy5fY29uZmlndXJhdGlvbiA9IGNvbmZpZ3VyYXRpb25cclxuICAgIGlmKHNldHRpbmdzKSB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzXHJcbiAgfVxyXG4gIGdldCBfY29uZmlndXJhdGlvbigpIHtcclxuICAgIHRoaXMuY29uZmlndXJhdGlvbiA9ICh0aGlzLmNvbmZpZ3VyYXRpb24pXHJcbiAgICAgID8gdGhpcy5jb25maWd1cmF0aW9uXHJcbiAgICAgIDoge31cclxuICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyYXRpb25cclxuICB9XHJcbiAgc2V0IF9jb25maWd1cmF0aW9uKGNvbmZpZ3VyYXRpb24pIHsgdGhpcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbiB9XHJcbiAgZ2V0IF9zZXR0aW5ncygpIHtcclxuICAgIHRoaXMuc2V0dGluZ3MgPSAodGhpcy5zZXR0aW5ncylcclxuICAgICAgPyB0aGlzLnNldHRpbmdzXHJcbiAgICAgIDoge31cclxuICAgIHJldHVybiB0aGlzLnNldHRpbmdzXHJcbiAgfVxyXG4gIHNldCBfc2V0dGluZ3Moc2V0dGluZ3MpIHtcclxuICAgIHRoaXMuc2V0dGluZ3MgPSBNVkMuVXRpbHMuYWRkUHJvcGVydGllc1RvT2JqZWN0KFxyXG4gICAgICBzZXR0aW5ncywgdGhpcy5fc2V0dGluZ3NcclxuICAgIClcclxuICB9XHJcbiAgZ2V0IF9lbWl0dGVycygpIHtcclxuICAgIHRoaXMuZW1pdHRlcnMgPSAodGhpcy5lbWl0dGVycylcclxuICAgICAgPyB0aGlzLmVtaXR0ZXJzXHJcbiAgICAgIDoge31cclxuICAgIHJldHVybiB0aGlzLmVtaXR0ZXJzXHJcbiAgfVxyXG4gIHNldCBfZW1pdHRlcnMoZW1pdHRlcnMpIHtcclxuICAgIHRoaXMuZW1pdHRlcnMgPSBNVkMuVXRpbHMuYWRkUHJvcGVydGllc1RvT2JqZWN0KFxyXG4gICAgICBlbWl0dGVycywgdGhpcy5fZW1pdHRlcnNcclxuICAgIClcclxuICB9XHJcbn1cclxuIiwiTVZDLlNlcnZpY2UgPSBjbGFzcyBleHRlbmRzIE1WQy5CYXNlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKVxuICB9XG4gIGdldCBfZGVmYXVsdHMoKSB7IHJldHVybiB0aGlzLmRlZmF1bHRzIHx8IHtcbiAgICBjb250ZW50VHlwZTogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9LFxuICAgIHJlc3BvbnNlVHlwZTogJ2pzb24nLFxuICB9IH1cbiAgZ2V0IF9yZXNwb25zZVR5cGVzKCkgeyByZXR1cm4gWycnLCAnYXJyYXlidWZmZXInLCAnYmxvYicsICdkb2N1bWVudCcsICdqc29uJywgJ3RleHQnXSB9XG4gIGdldCBfcmVzcG9uc2VUeXBlKCkgeyByZXR1cm4gdGhpcy5yZXNwb25zZVR5cGUgfVxuICBzZXQgX3Jlc3BvbnNlVHlwZShyZXNwb25zZVR5cGUpIHtcbiAgICB0aGlzLl94aHIucmVzcG9uc2VUeXBlID0gdGhpcy5fcmVzcG9uc2VUeXBlcy5maW5kKFxuICAgICAgKHJlc3BvbnNlVHlwZUl0ZW0pID0+IHJlc3BvbnNlVHlwZUl0ZW0gPT09IHJlc3BvbnNlVHlwZVxuICAgICkgfHwgdGhpcy5fZGVmYXVsdHMucmVzcG9uc2VUeXBlXG4gIH1cbiAgZ2V0IF90eXBlKCkgeyByZXR1cm4gdGhpcy50eXBlIH1cbiAgc2V0IF90eXBlKHR5cGUpIHsgdGhpcy50eXBlID0gdHlwZSB9XG4gIGdldCBfdXJsKCkgeyByZXR1cm4gdGhpcy51cmwgfVxuICBzZXQgX3VybCh1cmwpIHsgdGhpcy51cmwgPSB1cmwgfVxuICBnZXQgX2hlYWRlcnMoKSB7IHJldHVybiB0aGlzLmhlYWRlcnMgfHwgW10gfVxuICBzZXQgX2hlYWRlcnMoaGVhZGVycykge1xuICAgIHRoaXMuX2hlYWRlcnMubGVuZ3RoID0gMFxuICAgIGZvcihsZXQgaGVhZGVyIG9mIGhlYWRlcnMpIHtcbiAgICAgIHRoaXMuX3hoci5zZXRSZXF1ZXN0SGVhZGVyKHtoZWFkZXJ9WzBdLCB7aGVhZGVyfVsxXSlcbiAgICAgIHRoaXMuX2hlYWRlcnMucHVzaChoZWFkZXIpXG4gICAgfVxuICB9XG4gIGdldCBfZGF0YSgpIHsgcmV0dXJuIHRoaXMuZGF0YSB9XG4gIHNldCBfZGF0YShkYXRhKSB7IHRoaXMuZGF0YSA9IGRhdGEgfVxuICBnZXQgX3hocigpIHtcbiAgICB0aGlzLnhociA9ICh0aGlzLnhocilcbiAgICAgID8gdGhpcy54aHJcbiAgICAgIDogbmV3IFhNTEh0dHBSZXF1ZXN0KClcbiAgICByZXR1cm4gdGhpcy54aHJcbiAgfVxuICBnZXQgX2VuYWJsZWQoKSB7IHJldHVybiB0aGlzLmVuYWJsZWQgfHwgZmFsc2UgfVxuICBzZXQgX2VuYWJsZWQoZW5hYmxlZCkgeyB0aGlzLmVuYWJsZWQgPSBlbmFibGVkIH1cbiAgcmVxdWVzdChkYXRhKSB7XG4gICAgZGF0YSA9IGRhdGEgfHwgdGhpcy5kYXRhIHx8IG51bGxcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYodGhpcy5feGhyLnN0YXR1cyA9PT0gMjAwKSB0aGlzLl94aHIuYWJvcnQoKVxuICAgICAgdGhpcy5feGhyLm9wZW4odGhpcy50eXBlLCB0aGlzLnVybClcbiAgICAgIHRoaXMuX2hlYWRlcnMgPSB0aGlzLnNldHRpbmdzLmhlYWRlcnMgfHwgW3RoaXMuX2RlZmF1bHRzLmNvbnRlbnRUeXBlXVxuICAgICAgdGhpcy5feGhyLm9ubG9hZCA9IHJlc29sdmVcbiAgICAgIHRoaXMuX3hoci5vbmVycm9yID0gcmVqZWN0XG4gICAgICB0aGlzLl94aHIuc2VuZChkYXRhKVxuICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICB0aGlzLmVtaXQoJ3hocjpyZXNvbHZlJywge1xuICAgICAgICBuYW1lOiAneGhyOnJlc29sdmUnLFxuICAgICAgICBkYXRhOiByZXNwb25zZS5jdXJyZW50VGFyZ2V0LFxuICAgICAgfSlcbiAgICAgIHJldHVybiByZXNwb25zZVxuICAgIH0pXG4gIH1cbiAgZW5hYmxlKCkge1xuICAgIGxldCBzZXR0aW5ncyA9IHRoaXMuc2V0dGluZ3NcbiAgICBpZihcbiAgICAgICF0aGlzLmVuYWJsZWQgJiZcbiAgICAgIE9iamVjdC5rZXlzKHNldHRpbmdzKS5sZW5ndGhcbiAgICApIHtcbiAgICAgIGlmKHNldHRpbmdzLnR5cGUpIHRoaXMuX3R5cGUgPSBzZXR0aW5ncy50eXBlXG4gICAgICBpZihzZXR0aW5ncy51cmwpIHRoaXMuX3VybCA9IHNldHRpbmdzLnVybFxuICAgICAgaWYoc2V0dGluZ3MuZGF0YSkgdGhpcy5fZGF0YSA9IHNldHRpbmdzLmRhdGEgfHwgbnVsbFxuICAgICAgaWYodGhpcy5zZXR0aW5ncy5yZXNwb25zZVR5cGUpIHRoaXMuX3Jlc3BvbnNlVHlwZSA9IHRoaXMuX3NldHRpbmdzLnJlc3BvbnNlVHlwZVxuICAgICAgdGhpcy5fZW5hYmxlZCA9IHRydWVcbiAgICB9XG4gIH1cbiAgZGlzYWJsZSgpIHtcbiAgICBsZXQgc2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzXG4gICAgaWYoXG4gICAgICB0aGlzLmVuYWJsZWQgJiZcbiAgICAgIE9iamVjdC5rZXlzKHNldHRpbmdzKS5sZW5ndGhcbiAgICApIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl90eXBlXG4gICAgICBkZWxldGUgdGhpcy5fdXJsXG4gICAgICBkZWxldGUgdGhpcy5fZGF0YVxuICAgICAgZGVsZXRlIHRoaXMuX2hlYWRlcnNcbiAgICAgIGRlbGV0ZSB0aGlzLl9yZXNwb25zZVR5cGVcbiAgICAgIHRoaXMuX2VuYWJsZWQgPSBmYWxzZVxuICAgIH1cbiAgfVxufVxuIiwiTVZDLk1vZGVsID0gY2xhc3MgZXh0ZW5kcyBNVkMuQmFzZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cylcbiAgfVxuICBnZXQgX2xvY2FsU3RvcmFnZSgpIHsgcmV0dXJuIHRoaXMubG9jYWxTdG9yYWdlIH1cbiAgc2V0IF9sb2NhbFN0b3JhZ2UobG9jYWxTdG9yYWdlKSB7IHRoaXMubG9jYWxTdG9yYWdlID0gbG9jYWxTdG9yYWdlIH1cbiAgZ2V0IF9pc1NldHRpbmcoKSB7IHJldHVybiB0aGlzLmlzU2V0dGluZyB9XG4gIHNldCBfaXNTZXR0aW5nKGlzU2V0dGluZykgeyB0aGlzLmlzU2V0dGluZyA9IGlzU2V0dGluZyB9XG4gIGdldCBfZGVmYXVsdHMoKSB7IHJldHVybiB0aGlzLl9kZWZhdWx0cyB9XG4gIHNldCBfZGVmYXVsdHMoZGVmYXVsdHMpIHtcbiAgICB0aGlzLmRlZmF1bHRzID0gZGVmYXVsdHNcbiAgICB0aGlzLnNldCh0aGlzLmRlZmF1bHRzKVxuICB9XG4gIGdldCBfc2NoZW1hKCkgeyByZXR1cm4gdGhpcy5fc2NoZW1hIH1cbiAgc2V0IF9zY2hlbWEoc2NoZW1hKSB7IHRoaXMuc2NoZW1hID0gc2NoZW1hIH1cbiAgZ2V0IF9oaXN0aW9ncmFtKCkgeyByZXR1cm4gdGhpcy5oaXN0aW9ncmFtIHx8IHtcbiAgICBsZW5ndGg6IDFcbiAgfSB9XG4gIHNldCBfaGlzdGlvZ3JhbShoaXN0aW9ncmFtKSB7XG4gICAgdGhpcy5oaXN0aW9ncmFtID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIHRoaXMuX2hpc3Rpb2dyYW0sXG4gICAgICBoaXN0aW9ncmFtXG4gICAgKVxuICB9XG4gIGdldCBfaGlzdG9yeSgpIHtcbiAgICB0aGlzLmhpc3RvcnkgPSAodGhpcy5oaXN0b3J5KVxuICAgICAgPyB0aGlzLmhpc3RvcnlcbiAgICAgIDogW11cbiAgICByZXR1cm4gdGhpcy5oaXN0b3J5XG4gIH1cbiAgc2V0IF9oaXN0b3J5KGRhdGEpIHtcbiAgICBpZihcbiAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aFxuICAgICkge1xuICAgICAgaWYodGhpcy5faGlzdGlvZ3JhbS5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5faGlzdG9yeS51bnNoaWZ0KHRoaXMucGFyc2UoZGF0YSkpXG4gICAgICAgIHRoaXMuX2hpc3Rvcnkuc3BsaWNlKHRoaXMuX2hpc3Rpb2dyYW0ubGVuZ3RoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBnZXQgX2RiKCkge1xuICAgIGxldCBkYiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMubG9jYWxTdG9yYWdlLmVuZHBvaW50KVxuICAgIHRoaXMuZGIgPSAoZGIpXG4gICAgICA/IGRiXG4gICAgICA6ICd7fSdcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLmRiKVxuICB9XG4gIHNldCBfZGIoZGIpIHtcbiAgICBkYiA9IEpTT04uc3RyaW5naWZ5KGRiKVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMubG9jYWxTdG9yYWdlLmVuZHBvaW50LCBkYilcbiAgfVxuICBnZXQgX2RhdGEoKSB7XG4gICAgdGhpcy5kYXRhID0gICh0aGlzLmRhdGEpXG4gICAgICA/IHRoaXMuZGF0YVxuICAgICAgOiB7fVxuICAgIHJldHVybiB0aGlzLmRhdGFcbiAgfVxuICBnZXQgX2RhdGFFdmVudHMoKSB7XG4gICAgdGhpcy5kYXRhRXZlbnRzID0gKHRoaXMuZGF0YUV2ZW50cylcbiAgICAgID8gdGhpcy5kYXRhRXZlbnRzXG4gICAgICA6IHt9XG4gICAgcmV0dXJuIHRoaXMuZGF0YUV2ZW50c1xuICB9XG4gIHNldCBfZGF0YUV2ZW50cyhkYXRhRXZlbnRzKSB7XG4gICAgdGhpcy5kYXRhRXZlbnRzID0gTVZDLlV0aWxzLmFkZFByb3BlcnRpZXNUb09iamVjdChcbiAgICAgIGRhdGFFdmVudHMsIHRoaXMuX2RhdGFFdmVudHNcbiAgICApXG4gIH1cbiAgZ2V0IF9kYXRhQ2FsbGJhY2tzKCkge1xuICAgIHRoaXMuZGF0YUNhbGxiYWNrcyA9ICh0aGlzLmRhdGFDYWxsYmFja3MpXG4gICAgICA/IHRoaXMuZGF0YUNhbGxiYWNrc1xuICAgICAgOiB7fVxuICAgIHJldHVybiB0aGlzLmRhdGFDYWxsYmFja3NcbiAgfVxuICBzZXQgX2RhdGFDYWxsYmFja3MoZGF0YUNhbGxiYWNrcykge1xuICAgIHRoaXMuZGF0YUNhbGxiYWNrcyA9IE1WQy5VdGlscy5hZGRQcm9wZXJ0aWVzVG9PYmplY3QoXG4gICAgICBkYXRhQ2FsbGJhY2tzLCB0aGlzLl9kYXRhQ2FsbGJhY2tzXG4gICAgKVxuICB9XG4gIGdldCBfc2VydmljZXMoKSB7XG4gICAgdGhpcy5zZXJ2aWNlcyA9ICAodGhpcy5zZXJ2aWNlcylcbiAgICAgID8gdGhpcy5zZXJ2aWNlc1xuICAgICAgOiB7fVxuICAgIHJldHVybiB0aGlzLnNlcnZpY2VzXG4gIH1cbiAgc2V0IF9zZXJ2aWNlcyhzZXJ2aWNlcykge1xuICAgIHRoaXMuc2VydmljZXMgPSBNVkMuVXRpbHMuYWRkUHJvcGVydGllc1RvT2JqZWN0KFxuICAgICAgc2VydmljZXMsIHRoaXMuX3NlcnZpY2VzXG4gICAgKVxuICB9XG4gIGdldCBfc2VydmljZUV2ZW50cygpIHtcbiAgICB0aGlzLnNlcnZpY2VFdmVudHMgPSAodGhpcy5zZXJ2aWNlRXZlbnRzKVxuICAgICAgPyB0aGlzLnNlcnZpY2VFdmVudHNcbiAgICAgIDoge31cbiAgICByZXR1cm4gdGhpcy5zZXJ2aWNlRXZlbnRzXG4gIH1cbiAgc2V0IF9zZXJ2aWNlRXZlbnRzKHNlcnZpY2VFdmVudHMpIHtcbiAgICB0aGlzLnNlcnZpY2VFdmVudHMgPSBNVkMuVXRpbHMuYWRkUHJvcGVydGllc1RvT2JqZWN0KFxuICAgICAgc2VydmljZUV2ZW50cywgdGhpcy5fc2VydmljZUV2ZW50c1xuICAgIClcbiAgfVxuICBnZXQgX3NlcnZpY2VDYWxsYmFja3MoKSB7XG4gICAgdGhpcy5zZXJ2aWNlQ2FsbGJhY2tzID0gKHRoaXMuc2VydmljZUNhbGxiYWNrcylcbiAgICAgID8gdGhpcy5zZXJ2aWNlQ2FsbGJhY2tzXG4gICAgICA6IHt9XG4gICAgcmV0dXJuIHRoaXMuc2VydmljZUNhbGxiYWNrc1xuICB9XG4gIHNldCBfc2VydmljZUNhbGxiYWNrcyhzZXJ2aWNlQ2FsbGJhY2tzKSB7XG4gICAgdGhpcy5zZXJ2aWNlQ2FsbGJhY2tzID0gTVZDLlV0aWxzLmFkZFByb3BlcnRpZXNUb09iamVjdChcbiAgICAgIHNlcnZpY2VDYWxsYmFja3MsIHRoaXMuX3NlcnZpY2VDYWxsYmFja3NcbiAgICApXG4gIH1cbiAgZ2V0IF9lbmFibGVkKCkgeyByZXR1cm4gdGhpcy5lbmFibGVkIHx8IGZhbHNlIH1cbiAgc2V0IF9lbmFibGVkKGVuYWJsZWQpIHsgdGhpcy5lbmFibGVkID0gZW5hYmxlZCB9XG4gIGVuYWJsZVNlcnZpY2VFdmVudHMoKSB7XG4gICAgTVZDLlV0aWxzLmJpbmRFdmVudHNUb1RhcmdldE9iamVjdHModGhpcy5zZXJ2aWNlRXZlbnRzLCB0aGlzLnNlcnZpY2VzLCB0aGlzLnNlcnZpY2VDYWxsYmFja3MpXG4gIH1cbiAgZGlzYWJsZVNlcnZpY2VFdmVudHMoKSB7XG4gICAgTVZDLlV0aWxzLnVuYmluZEV2ZW50c1RvVGFyZ2V0T2JqZWN0cyh0aGlzLnNlcnZpY2VFdmVudHMsIHRoaXMuc2VydmljZXMsIHRoaXMuc2VydmljZUNhbGxiYWNrcylcbiAgfVxuICBlbmFibGVEYXRhRXZlbnRzKCkge1xuICAgIE1WQy5VdGlscy5iaW5kRXZlbnRzVG9UYXJnZXRPYmplY3RzKHRoaXMuZGF0YUV2ZW50cywgdGhpcywgdGhpcy5kYXRhQ2FsbGJhY2tzKVxuICB9XG4gIGRpc2FibGVEYXRhRXZlbnRzKCkge1xuICAgIE1WQy5VdGlscy51bmJpbmRFdmVudHNUb1RhcmdldE9iamVjdHModGhpcy5kYXRhRXZlbnRzLCB0aGlzLCB0aGlzLmRhdGFDYWxsYmFja3MpXG4gIH1cbiAgZ2V0KCkge1xuICAgIGxldCBwcm9wZXJ0eSA9IGFyZ3VtZW50c1swXVxuICAgIHJldHVybiB0aGlzLl9kYXRhWydfJy5jb25jYXQocHJvcGVydHkpXVxuICB9XG4gIHNldCgpIHtcbiAgICB0aGlzLl9oaXN0b3J5ID0gdGhpcy5wYXJzZSgpXG4gICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgbGV0IF9hcmd1bWVudHMgPSBPYmplY3QuZW50cmllcyhhcmd1bWVudHNbMF0pXG4gICAgICAgIF9hcmd1bWVudHMuZm9yRWFjaCgoW2tleSwgdmFsdWVdLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGlmKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9pc1NldHRpbmcgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIGlmKGluZGV4ID09PSAoX2FyZ3VtZW50cy5sZW5ndGggLSAxKSkge1xuICAgICAgICAgICAgdGhpcy5faXNTZXR0aW5nID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5zZXREYXRhUHJvcGVydHkoa2V5LCB2YWx1ZSlcbiAgICAgICAgICBpZih0aGlzLmxvY2FsU3RvcmFnZSkgdGhpcy5zZXREQihrZXksIHZhbHVlKVxuICAgICAgICB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAyOlxuICAgICAgICB2YXIga2V5ID0gYXJndW1lbnRzWzBdXG4gICAgICAgIHZhciB2YWx1ZSA9IGFyZ3VtZW50c1sxXVxuICAgICAgICB0aGlzLnNldERhdGFQcm9wZXJ0eShrZXksIHZhbHVlKVxuICAgICAgICBpZih0aGlzLmxvY2FsU3RvcmFnZSkgdGhpcy5zZXREQihrZXksIHZhbHVlKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAzOlxuICAgICAgICB2YXIga2V5ID0gYXJndW1lbnRzWzBdXG4gICAgICAgIHZhciB2YWx1ZSA9IGFyZ3VtZW50c1sxXVxuICAgICAgICB2YXIgc2lsZW50ID0gYXJndW1lbnRzWzJdXG4gICAgICAgIHRoaXMuc2V0RGF0YVByb3BlcnR5KGtleSwgdmFsdWUsIHNpbGVudClcbiAgICAgICAgaWYodGhpcy5sb2NhbFN0b3JhZ2UpIHRoaXMuc2V0REIoa2V5LCB2YWx1ZSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cbiAgdW5zZXQoKSB7XG4gICAgdGhpcy5faGlzdG9yeSA9IHRoaXMucGFyc2UoKVxuICAgIHN3aXRjaChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIGZvcihsZXQga2V5IG9mIE9iamVjdC5rZXlzKHRoaXMuX2RhdGEpKSB7XG4gICAgICAgICAgdGhpcy51bnNldERhdGFQcm9wZXJ0eShrZXkpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgbGV0IGtleSA9IGFyZ3VtZW50c1swXVxuICAgICAgICB0aGlzLnVuc2V0RGF0YVByb3BlcnR5KGtleSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cbiAgc2V0REIoKSB7XG4gICAgbGV0IGRiID0gdGhpcy5fZGJcbiAgICBzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICB2YXIgX2FyZ3VtZW50cyA9IE9iamVjdC5lbnRyaWVzKGFyZ3VtZW50c1swXSlcbiAgICAgICAgX2FyZ3VtZW50cy5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICBkYltrZXldID0gdmFsdWVcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgbGV0IGtleSA9IGFyZ3VtZW50c1swXVxuICAgICAgICBsZXQgdmFsdWUgPSBhcmd1bWVudHNbMV1cbiAgICAgICAgZGJba2V5XSA9IHZhbHVlXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHRoaXMuX2RiID0gZGJcbiAgfVxuICB1bnNldERCKCkge1xuICAgIHN3aXRjaChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9kYlxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAxOlxuICAgICAgICBsZXQgZGIgPSB0aGlzLl9kYlxuICAgICAgICBsZXQga2V5ID0gYXJndW1lbnRzWzBdXG4gICAgICAgIGRlbGV0ZSBkYltrZXldXG4gICAgICAgIHRoaXMuX2RiID0gZGJcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cbiAgc2V0RGF0YVByb3BlcnR5KGtleSwgdmFsdWUsIHNpbGVudCkge1xuICAgIGlmKCF0aGlzLl9kYXRhWydfJy5jb25jYXQoa2V5KV0pIHtcbiAgICAgIGxldCBjb250ZXh0ID0gdGhpc1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoXG4gICAgICAgIHRoaXMuX2RhdGEsXG4gICAgICAgIHtcbiAgICAgICAgICBbJ18nLmNvbmNhdChrZXkpXToge1xuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZ2V0KCkgeyByZXR1cm4gdGhpc1trZXldIH0sXG4gICAgICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgICAgdGhpc1trZXldID0gdmFsdWVcbiAgICAgICAgICAgICAgaWYoXG4gICAgICAgICAgICAgICAgIXNpbGVudCAmJlxuICAgICAgICAgICAgICAgICFjb250ZXh0Ll9pc1NldHRpbmdcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNldFZhbHVlRXZlbnROYW1lID0gWydzZXQnLCAnOicsIGtleV0uam9pbignJylcbiAgICAgICAgICAgICAgICBsZXQgc2V0RXZlbnROYW1lID0gJ3NldCdcbiAgICAgICAgICAgICAgICBjb250ZXh0LmVtaXQoXG4gICAgICAgICAgICAgICAgICBzZXRWYWx1ZUV2ZW50TmFtZSxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogc2V0VmFsdWVFdmVudE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgY29udGV4dFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBjb250ZXh0LmVtaXQoXG4gICAgICAgICAgICAgICAgICBzZXRFdmVudE5hbWUsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHNldEV2ZW50TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBjb250ZXh0XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApXG4gICAgfVxuICAgIHRoaXMuX2RhdGFbJ18nLmNvbmNhdChrZXkpXSA9IHZhbHVlXG4gIH1cbiAgdW5zZXREYXRhUHJvcGVydHkoa2V5KSB7XG4gICAgbGV0IHVuc2V0VmFsdWVFdmVudE5hbWUgPSBbJ3Vuc2V0JywgJzonLCBrZXldLmpvaW4oJycpXG4gICAgbGV0IHVuc2V0RXZlbnROYW1lID0gJ3Vuc2V0J1xuICAgIGxldCB1bnNldFZhbHVlID0gdGhpcy5fZGF0YVtrZXldXG4gICAgZGVsZXRlIHRoaXMuX2RhdGFbJ18nLmNvbmNhdChrZXkpXVxuICAgIGRlbGV0ZSB0aGlzLl9kYXRhW2tleV1cbiAgICB0aGlzLmVtaXQoXG4gICAgICB1bnNldFZhbHVlRXZlbnROYW1lLFxuICAgICAge1xuICAgICAgICBuYW1lOiB1bnNldFZhbHVlRXZlbnROYW1lLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgdmFsdWU6IHVuc2V0VmFsdWUsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gICAgdGhpcy5lbWl0KFxuICAgICAgdW5zZXRFdmVudE5hbWUsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IHVuc2V0RXZlbnROYW1lLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgdmFsdWU6IHVuc2V0VmFsdWUsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gIH1cbiAgcGFyc2UoZGF0YSkge1xuICAgIGRhdGEgPSBkYXRhIHx8IHRoaXMuX2RhdGFcbiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKHt9LCBkYXRhKSkpXG4gIH1cbiAgZW5hYmxlKCkge1xuICAgIGxldCBzZXR0aW5ncyA9IHRoaXMuc2V0dGluZ3NcbiAgICBpZihcbiAgICAgIHNldHRpbmdzICYmXG4gICAgICAhdGhpcy5lbmFibGVkXG4gICAgKSB7XG4gICAgICBpZih0aGlzLnNldHRpbmdzLmxvY2FsU3RvcmFnZSkgdGhpcy5sb2NhbFN0b3JhZ2UgPSB0aGlzLnNldHRpbmdzLmxvY2FsU3RvcmFnZVxuICAgICAgaWYodGhpcy5zZXR0aW5ncy5oaXN0aW9ncmFtKSB0aGlzLl9oaXN0aW9ncmFtID0gdGhpcy5zZXR0aW5ncy5oaXN0aW9ncmFtXG4gICAgICBpZih0aGlzLnNldHRpbmdzLmVtaXR0ZXJzKSB0aGlzLl9lbWl0dGVycyA9IHRoaXMuc2V0dGluZ3MuZW1pdHRlcnNcbiAgICAgIGlmKHRoaXMuc2V0dGluZ3Muc2VydmljZXMpIHRoaXMuX3NlcnZpY2VzID0gdGhpcy5zZXR0aW5ncy5zZXJ2aWNlc1xuICAgICAgaWYodGhpcy5zZXR0aW5ncy5zZXJ2aWNlQ2FsbGJhY2tzKSB0aGlzLl9zZXJ2aWNlQ2FsbGJhY2tzID0gdGhpcy5zZXR0aW5ncy5zZXJ2aWNlQ2FsbGJhY2tzXG4gICAgICBpZih0aGlzLnNldHRpbmdzLnNlcnZpY2VFdmVudHMpIHRoaXMuX3NlcnZpY2VFdmVudHMgPSB0aGlzLnNldHRpbmdzLnNlcnZpY2VFdmVudHNcbiAgICAgIGlmKHRoaXMuc2V0dGluZ3MuZGF0YSkgdGhpcy5zZXQodGhpcy5zZXR0aW5ncy5kYXRhKVxuICAgICAgaWYodGhpcy5zZXR0aW5ncy5kYXRhQ2FsbGJhY2tzKSB0aGlzLl9kYXRhQ2FsbGJhY2tzID0gdGhpcy5zZXR0aW5ncy5kYXRhQ2FsbGJhY2tzXG4gICAgICBpZih0aGlzLnNldHRpbmdzLmRhdGFFdmVudHMpIHRoaXMuX2RhdGFFdmVudHMgPSB0aGlzLnNldHRpbmdzLmRhdGFFdmVudHNcbiAgICAgIGlmKHRoaXMuc2V0dGluZ3Muc2NoZW1hKSB0aGlzLl9zY2hlbWEgPSB0aGlzLnNldHRpbmdzLnNjaGVtYVxuICAgICAgaWYodGhpcy5zZXR0aW5ncy5kZWZhdWx0cykgdGhpcy5fZGVmYXVsdHMgPSB0aGlzLnNldHRpbmdzLmRlZmF1bHRzXG4gICAgICBpZihcbiAgICAgICAgdGhpcy5zZXJ2aWNlcyAmJlxuICAgICAgICB0aGlzLnNlcnZpY2VFdmVudHMgJiZcbiAgICAgICAgdGhpcy5zZXJ2aWNlQ2FsbGJhY2tzXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5lbmFibGVTZXJ2aWNlRXZlbnRzKClcbiAgICAgIH1cbiAgICAgIGlmKFxuICAgICAgICB0aGlzLmRhdGFFdmVudHMgJiZcbiAgICAgICAgdGhpcy5kYXRhQ2FsbGJhY2tzXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5lbmFibGVEYXRhRXZlbnRzKClcbiAgICAgIH1cbiAgICAgIHRoaXMuX2VuYWJsZWQgPSB0cnVlXG4gICAgfVxuICB9XG4gIGRpc2FibGUoKSB7XG4gICAgbGV0IHNldHRpbmdzID0gdGhpcy5zZXR0aW5nc1xuICAgIGlmKFxuICAgICAgc2V0dGluZ3MgJiZcbiAgICAgICF0aGlzLmVuYWJsZWRcbiAgICApIHtcbiAgICAgIGlmKFxuICAgICAgICB0aGlzLnNlcnZpY2VzICYmXG4gICAgICAgIHRoaXMuc2VydmljZUV2ZW50cyAmJlxuICAgICAgICB0aGlzLnNlcnZpY2VDYWxsYmFja3NcbiAgICAgICkge1xuICAgICAgICB0aGlzLmRpc2FibGVTZXJ2aWNlRXZlbnRzKClcbiAgICAgIH1cbiAgICAgIGlmKFxuICAgICAgICB0aGlzLmRhdGFFdmVudHMgJiZcbiAgICAgICAgdGhpcy5kYXRhQ2FsbGJhY2tzXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlRGF0YUV2ZW50cygpXG4gICAgICB9XG4gICAgICBkZWxldGUgdGhpcy5sb2NhbFN0b3JhZ2VcbiAgICAgIGRlbGV0ZSB0aGlzLl9oaXN0aW9ncmFtXG4gICAgICBkZWxldGUgdGhpcy5fc2VydmljZXNcbiAgICAgIGRlbGV0ZSB0aGlzLl9zZXJ2aWNlQ2FsbGJhY2tzXG4gICAgICBkZWxldGUgdGhpcy5fc2VydmljZUV2ZW50c1xuICAgICAgZGVsZXRlIHRoaXMuX2RhdGFcbiAgICAgIGRlbGV0ZSB0aGlzLl9kYXRhQ2FsbGJhY2tzXG4gICAgICBkZWxldGUgdGhpcy5fZGF0YUV2ZW50c1xuICAgICAgZGVsZXRlIHRoaXMuX3NjaGVtYVxuICAgICAgZGVsZXRlIHRoaXMuX2VtaXR0ZXJzXG4gICAgfVxuICB9XG59XG4iLCJNVkMuRW1pdHRlciA9IGNsYXNzIGV4dGVuZHMgTVZDLk1vZGVsIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKC4uLmFyZ3VtZW50cylcclxuICAgIGlmKHRoaXMuc2V0dGluZ3MpIHtcclxuICAgICAgaWYodGhpcy5zZXR0aW5ncy5uYW1lKSB0aGlzLl9uYW1lID0gdGhpcy5zZXR0aW5ncy5uYW1lXHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCBfbmFtZSgpIHsgcmV0dXJuIHRoaXMubmFtZSB9XHJcbiAgc2V0IF9uYW1lKG5hbWUpIHsgdGhpcy5uYW1lID0gbmFtZSB9XHJcbiAgZW1pc3Npb24oKSB7XHJcbiAgICBsZXQgZXZlbnREYXRhID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgIGRhdGE6IHRoaXMuZGF0YVxyXG4gICAgfVxyXG4gICAgdGhpcy5lbWl0KFxyXG4gICAgICB0aGlzLm5hbWUsXHJcbiAgICAgIGV2ZW50RGF0YVxyXG4gICAgKVxyXG4gICAgcmV0dXJuIGV2ZW50RGF0YVxyXG4gIH1cclxufVxyXG4iLCJNVkMuRW1pdHRlcnMgPSB7fVxyXG4iLCJNVkMuRW1pdHRlcnMuTmF2aWdhdGVFbWl0dGVyID0gY2xhc3MgZXh0ZW5kcyBNVkMuRW1pdHRlciB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlciguLi5hcmd1bWVudHMpXHJcbiAgICB0aGlzLmFkZFNldHRpbmdzKClcclxuICAgIHRoaXMuZW5hYmxlKClcclxuICB9XHJcbiAgYWRkU2V0dGluZ3MoKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gJ25hdmlnYXRlJ1xyXG4gICAgdGhpcy5fc2NoZW1hID0ge1xyXG4gICAgICBvbGRVUkw6IFN0cmluZyxcclxuICAgICAgbmV3VVJMOiBTdHJpbmcsXHJcbiAgICAgIGN1cnJlbnRSb3V0ZTogU3RyaW5nLFxyXG4gICAgICBjdXJyZW50Q29udHJvbGxlcjogU3RyaW5nLFxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJNVkMuVmlldyA9IGNsYXNzIGV4dGVuZHMgTVZDLkJhc2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpXG4gIH1cbiAgZ2V0IF9lbGVtZW50TmFtZSgpIHsgcmV0dXJuIHRoaXMuX2VsZW1lbnQudGFnTmFtZSB9XG4gIHNldCBfZWxlbWVudE5hbWUoZWxlbWVudE5hbWUpIHtcbiAgICBpZighdGhpcy5fZWxlbWVudCkgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudE5hbWUpXG4gIH1cbiAgZ2V0IF9lbGVtZW50KCkgeyByZXR1cm4gdGhpcy5lbGVtZW50IH1cbiAgc2V0IF9lbGVtZW50KGVsZW1lbnQpIHtcbiAgICBpZihcbiAgICAgIGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fFxuICAgICAgZWxlbWVudCBpbnN0YW5jZW9mIERvY3VtZW50XG4gICAgKSB7XG4gICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50XG4gICAgfSBlbHNlIGlmKHR5cGVvZiBlbGVtZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50KVxuICAgIH1cbiAgICB0aGlzLmVsZW1lbnRPYnNlcnZlci5vYnNlcnZlKHRoaXMuZWxlbWVudCwge1xuICAgICAgc3VidHJlZTogdHJ1ZSxcbiAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICB9KVxuICB9XG4gIGdldCBfYXR0cmlidXRlcygpIHsgcmV0dXJuIHRoaXMuX2VsZW1lbnQuYXR0cmlidXRlcyB9XG4gIHNldCBfYXR0cmlidXRlcyhhdHRyaWJ1dGVzKSB7XG4gICAgZm9yKGxldCBbYXR0cmlidXRlS2V5LCBhdHRyaWJ1dGVWYWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYXR0cmlidXRlcykpIHtcbiAgICAgIGlmKHR5cGVvZiBhdHRyaWJ1dGVWYWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlS2V5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlS2V5LCBhdHRyaWJ1dGVWYWx1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZ2V0IF91aSgpIHtcbiAgICB0aGlzLnVpID0gKHRoaXMudWkpXG4gICAgICA/IHRoaXMudWlcbiAgICAgIDoge31cbiAgICByZXR1cm4gdGhpcy51aVxuICB9XG4gIHNldCBfdWkodWkpIHtcbiAgICBpZighdGhpcy5fdWlbJyRlbGVtZW50J10pIHRoaXMuX3VpWyckZWxlbWVudCddID0gdGhpcy5lbGVtZW50XG4gICAgZm9yKGxldCBbdWlLZXksIHVpVmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHVpKSkge1xuICAgICAgaWYodHlwZW9mIHVpVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRoaXMuX3VpW3VpS2V5XSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh1aVZhbHVlKVxuICAgICAgfSBlbHNlIGlmKFxuICAgICAgICB1aVZhbHVlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgfHxcbiAgICAgICAgdWlWYWx1ZSBpbnN0YW5jZW9mIERvY3VtZW50XG4gICAgICApIHtcbiAgICAgICAgdGhpcy5fdWlbdWlLZXldID0gdWlWYWx1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBnZXQgX3VpRXZlbnRzKCkgeyByZXR1cm4gdGhpcy51aUV2ZW50cyB9XG4gIHNldCBfdWlFdmVudHModWlFdmVudHMpIHsgdGhpcy51aUV2ZW50cyA9IHVpRXZlbnRzIH1cbiAgZ2V0IF91aUNhbGxiYWNrcygpIHtcbiAgICB0aGlzLnVpQ2FsbGJhY2tzID0gKHRoaXMudWlDYWxsYmFja3MpXG4gICAgICA/IHRoaXMudWlDYWxsYmFja3NcbiAgICAgIDoge31cbiAgICByZXR1cm4gdGhpcy51aUNhbGxiYWNrc1xuICB9XG4gIHNldCBfdWlDYWxsYmFja3ModWlDYWxsYmFja3MpIHtcbiAgICB0aGlzLnVpQ2FsbGJhY2tzID0gTVZDLlV0aWxzLmFkZFByb3BlcnRpZXNUb09iamVjdChcbiAgICAgIHVpQ2FsbGJhY2tzLCB0aGlzLl91aUNhbGxiYWNrc1xuICAgIClcbiAgfVxuICBnZXQgX29ic2VydmVyQ2FsbGJhY2tzKCkge1xuICAgIHRoaXMub2JzZXJ2ZXJDYWxsYmFja3MgPSAodGhpcy5vYnNlcnZlckNhbGxiYWNrcylcbiAgICAgID8gdGhpcy5vYnNlcnZlckNhbGxiYWNrc1xuICAgICAgOiB7fVxuICAgIHJldHVybiB0aGlzLm9ic2VydmVyQ2FsbGJhY2tzXG4gIH1cbiAgc2V0IF9vYnNlcnZlckNhbGxiYWNrcyhvYnNlcnZlckNhbGxiYWNrcykge1xuICAgIHRoaXMub2JzZXJ2ZXJDYWxsYmFja3MgPSBNVkMuVXRpbHMuYWRkUHJvcGVydGllc1RvT2JqZWN0KFxuICAgICAgb2JzZXJ2ZXJDYWxsYmFja3MsIHRoaXMuX29ic2VydmVyQ2FsbGJhY2tzXG4gICAgKVxuICB9XG4gIGdldCBlbGVtZW50T2JzZXJ2ZXIoKSB7XG4gICAgdGhpcy5fZWxlbWVudE9ic2VydmVyID0gKHRoaXMuX2VsZW1lbnRPYnNlcnZlcilcbiAgICAgID8gdGhpcy5fZWxlbWVudE9ic2VydmVyXG4gICAgICA6IG5ldyBNdXRhdGlvbk9ic2VydmVyKHRoaXMuZWxlbWVudE9ic2VydmUuYmluZCh0aGlzKSlcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudE9ic2VydmVyXG4gIH1cbiAgZ2V0IF9pbnNlcnQoKSB7IHJldHVybiB0aGlzLmluc2VydCB9XG4gIHNldCBfaW5zZXJ0KGluc2VydCkgeyB0aGlzLmluc2VydCA9IGluc2VydCB9XG4gIGdldCBfZW5hYmxlZCgpIHsgcmV0dXJuIHRoaXMuZW5hYmxlZCB8fCBmYWxzZSB9XG4gIHNldCBfZW5hYmxlZChlbmFibGVkKSB7IHRoaXMuZW5hYmxlZCA9IGVuYWJsZWQgfVxuICBnZXQgX3RlbXBsYXRlcygpIHtcbiAgICB0aGlzLnRlbXBsYXRlcyA9ICh0aGlzLnRlbXBsYXRlcylcbiAgICAgID8gdGhpcy50ZW1wbGF0ZXNcbiAgICAgIDoge31cbiAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZXNcbiAgfVxuICBzZXQgX3RlbXBsYXRlcyh0ZW1wbGF0ZXMpIHtcbiAgICB0aGlzLnRlbXBsYXRlcyA9IE1WQy5VdGlscy5hZGRQcm9wZXJ0aWVzVG9PYmplY3QoXG4gICAgICB0ZW1wbGF0ZXMsIHRoaXMuX3RlbXBsYXRlc1xuICAgIClcbiAgfVxuICBlbGVtZW50T2JzZXJ2ZShtdXRhdGlvblJlY29yZExpc3QsIG9ic2VydmVyKSB7XG4gICAgZm9yKGxldCBbbXV0YXRpb25SZWNvcmRJbmRleCwgbXV0YXRpb25SZWNvcmRdIG9mIE9iamVjdC5lbnRyaWVzKG11dGF0aW9uUmVjb3JkTGlzdCkpIHtcbiAgICAgIHN3aXRjaChtdXRhdGlvblJlY29yZC50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2NoaWxkTGlzdCc6XG4gICAgICAgICAgbGV0IG11dGF0aW9uUmVjb3JkQ2F0ZWdvcmllcyA9IFsnYWRkZWROb2RlcycsICdyZW1vdmVkTm9kZXMnXVxuICAgICAgICAgIGZvcihsZXQgbXV0YXRpb25SZWNvcmRDYXRlZ29yeSBvZiBtdXRhdGlvblJlY29yZENhdGVnb3JpZXMpIHtcbiAgICAgICAgICAgIGlmKG11dGF0aW9uUmVjb3JkW211dGF0aW9uUmVjb3JkQ2F0ZWdvcnldLmxlbmd0aCkge1xuICAgICAgICAgICAgICB0aGlzLnJlc2V0VUkoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBhdXRvSW5zZXJ0KCkge1xuICAgIGlmKHRoaXMuaW5zZXJ0KSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuaW5zZXJ0LmVsZW1lbnQpXG4gICAgICAuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICBlbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudCh0aGlzLmluc2VydC5tZXRob2QsIHRoaXMuZWxlbWVudClcbiAgICAgIH0pXG4gICAgfVxuICB9XG4gIGF1dG9SZW1vdmUoKSB7XG4gICAgaWYoXG4gICAgICB0aGlzLmVsZW1lbnQgJiZcbiAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50XG4gICAgKSB0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpXG4gIH1cbiAgZW5hYmxlRWxlbWVudChzZXR0aW5ncykge1xuICAgIHNldHRpbmdzID0gc2V0dGluZ3MgfHwgdGhpcy5zZXR0aW5nc1xuICAgIGlmKHNldHRpbmdzLmVsZW1lbnROYW1lKSB0aGlzLl9lbGVtZW50TmFtZSA9IHNldHRpbmdzLmVsZW1lbnROYW1lXG4gICAgaWYoc2V0dGluZ3MuZWxlbWVudCkgdGhpcy5fZWxlbWVudCA9IHNldHRpbmdzLmVsZW1lbnRcbiAgICBpZihzZXR0aW5ncy5hdHRyaWJ1dGVzKSB0aGlzLl9hdHRyaWJ1dGVzID0gc2V0dGluZ3MuYXR0cmlidXRlc1xuICAgIGlmKHNldHRpbmdzLnRlbXBsYXRlcykgdGhpcy5fdGVtcGxhdGVzID0gc2V0dGluZ3MudGVtcGxhdGVzXG4gICAgaWYoc2V0dGluZ3MuaW5zZXJ0KSB0aGlzLl9pbnNlcnQgPSBzZXR0aW5ncy5pbnNlcnRcbiAgfVxuICBkaXNhYmxlRWxlbWVudChzZXR0aW5ncykge1xuICAgIHNldHRpbmdzID0gc2V0dGluZ3MgfHwgdGhpcy5zZXR0aW5nc1xuICAgIGlmKFxuICAgICAgdGhpcy5lbGVtZW50ICYmXG4gICAgICB0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudFxuICAgICkgdGhpcy5lbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KVxuICAgIGlmKHRoaXMuZWxlbWVudCkgZGVsZXRlIHRoaXMuZWxlbWVudFxuICAgIGlmKHRoaXMuYXR0cmlidXRlcykgZGVsZXRlIHRoaXMuYXR0cmlidXRlc1xuICAgIGlmKHRoaXMudGVtcGxhdGVzKSBkZWxldGUgdGhpcy50ZW1wbGF0ZXNcbiAgICBpZih0aGlzLmluc2VydCkgZGVsZXRlIHRoaXMuaW5zZXJ0XG4gIH1cbiAgcmVzZXRVSSgpIHtcbiAgICB0aGlzLmRpc2FibGVVSSgpXG4gICAgdGhpcy5lbmFibGVVSSgpXG4gIH1cbiAgZW5hYmxlVUkoc2V0dGluZ3MpIHtcbiAgICBzZXR0aW5ncyA9IHNldHRpbmdzIHx8IHRoaXMuc2V0dGluZ3NcbiAgICBpZihzZXR0aW5ncy51aSkgdGhpcy5fdWkgPSBzZXR0aW5ncy51aVxuICAgIGlmKHNldHRpbmdzLnVpQ2FsbGJhY2tzKSB0aGlzLl91aUNhbGxiYWNrcyA9IHNldHRpbmdzLnVpQ2FsbGJhY2tzXG4gICAgaWYoc2V0dGluZ3MudWlFdmVudHMpIHtcbiAgICAgIHRoaXMuX3VpRXZlbnRzID0gc2V0dGluZ3MudWlFdmVudHNcbiAgICAgIHRoaXMuZW5hYmxlVUlFdmVudHMoKVxuICAgIH1cbiAgfVxuICBkaXNhYmxlVUkoc2V0dGluZ3MpIHtcbiAgICBzZXR0aW5ncyA9IHNldHRpbmdzIHx8IHRoaXMuc2V0dGluZ3NcbiAgICBpZihzZXR0aW5ncy51aUV2ZW50cykge1xuICAgICAgdGhpcy5kaXNhYmxlVUlFdmVudHMoKVxuICAgICAgZGVsZXRlIHRoaXMuX3VpRXZlbnRzXG4gICAgfVxuICAgIGRlbGV0ZSB0aGlzLnVpRXZlbnRzXG4gICAgZGVsZXRlIHRoaXMudWlcbiAgICBkZWxldGUgdGhpcy51aUNhbGxiYWNrc1xuICB9XG4gIGVuYWJsZVVJRXZlbnRzKCkge1xuICAgIGlmKFxuICAgICAgdGhpcy51aUV2ZW50cyAmJlxuICAgICAgdGhpcy51aSAmJlxuICAgICAgdGhpcy51aUNhbGxiYWNrc1xuICAgICkge1xuICAgICAgTVZDLlV0aWxzLmJpbmRFdmVudHNUb1RhcmdldE9iamVjdHMoXG4gICAgICAgIHRoaXMudWlFdmVudHMsXG4gICAgICAgIHRoaXMudWksXG4gICAgICAgIHRoaXMudWlDYWxsYmFja3NcbiAgICAgIClcbiAgICB9XG4gIH1cbiAgZGlzYWJsZVVJRXZlbnRzKCkge1xuICAgIGlmKFxuICAgICAgdGhpcy51aUV2ZW50cyAmJlxuICAgICAgdGhpcy51aSAmJlxuICAgICAgdGhpcy51aUNhbGxiYWNrc1xuICAgICkge1xuICAgICAgTVZDLlV0aWxzLnVuYmluZEV2ZW50c0Zyb21UYXJnZXRPYmplY3RzKFxuICAgICAgICB0aGlzLnVpRXZlbnRzLFxuICAgICAgICB0aGlzLnVpLFxuICAgICAgICB0aGlzLnVpQ2FsbGJhY2tzXG4gICAgICApXG4gICAgfVxuICB9XG4gIGVuYWJsZUVtaXR0ZXJzKCkge1xuICAgIGlmKHRoaXMuc2V0dGluZ3MuZW1pdHRlcnMpIHRoaXMuX2VtaXR0ZXJzID0gdGhpcy5zZXR0aW5ncy5lbWl0dGVyc1xuICB9XG4gIGRpc2FibGVFbWl0dGVycygpIHtcbiAgICBpZih0aGlzLl9lbWl0dGVycykgZGVsZXRlIHRoaXMuX2VtaXR0ZXJzXG4gIH1cbiAgZW5hYmxlKCkge1xuICAgIGxldCBzZXR0aW5ncyA9IHRoaXMuc2V0dGluZ3NcbiAgICBpZihcbiAgICAgIHNldHRpbmdzICYmXG4gICAgICAhdGhpcy5fZW5hYmxlZFxuICAgICkge1xuICAgICAgdGhpcy5lbmFibGVFbWl0dGVycygpXG4gICAgICB0aGlzLmVuYWJsZUVsZW1lbnQoc2V0dGluZ3MpXG4gICAgICB0aGlzLmVuYWJsZVVJKHNldHRpbmdzKVxuICAgICAgdGhpcy5fZW5hYmxlZCA9IHRydWVcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuICB9XG4gIGRpc2FibGUoKSB7XG4gICAgbGV0IHNldHRpbmdzID0gdGhpcy5zZXR0aW5nc1xuICAgIGlmKFxuICAgICAgc2V0dGluZ3MgJiZcbiAgICAgIHRoaXMuX2VuYWJsZWRcbiAgICApIHtcbiAgICAgIHRoaXMuZGlzYWJsZVVJKHNldHRpbmdzKVxuICAgICAgdGhpcy5kaXNhYmxlRWxlbWVudChzZXR0aW5ncylcbiAgICAgIHRoaXMuZGlzYWJsZUVtaXR0ZXJzKClcbiAgICAgIHRoaXMuX2VuYWJsZWQgPSBmYWxzZVxuICAgICAgcmV0dXJuIHRoaXNzXG4gICAgfVxuICB9XG59XG4iLCJNVkMuQ29udHJvbGxlciA9IGNsYXNzIGV4dGVuZHMgTVZDLkJhc2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpXG4gIH1cbiAgZ2V0IF9lbWl0dGVyQ2FsbGJhY2tzKCkge1xuICAgIHRoaXMuZW1pdHRlckNhbGxiYWNrcyA9ICh0aGlzLmVtaXR0ZXJDYWxsYmFja3MpXG4gICAgICA/IHRoaXMuZW1pdHRlckNhbGxiYWNrc1xuICAgICAgOiB7fVxuICAgIHJldHVybiB0aGlzLmVtaXR0ZXJDYWxsYmFja3NcbiAgfVxuICBzZXQgX2VtaXR0ZXJDYWxsYmFja3MoZW1pdHRlckNhbGxiYWNrcykge1xuICAgIHRoaXMuZW1pdHRlckNhbGxiYWNrcyA9IE1WQy5VdGlscy5hZGRQcm9wZXJ0aWVzVG9PYmplY3QoXG4gICAgICBlbWl0dGVyQ2FsbGJhY2tzLCB0aGlzLl9lbWl0dGVyQ2FsbGJhY2tzXG4gICAgKVxuICB9XG4gIGdldCBfbW9kZWxDYWxsYmFja3MoKSB7XG4gICAgdGhpcy5tb2RlbENhbGxiYWNrcyA9ICh0aGlzLm1vZGVsQ2FsbGJhY2tzKVxuICAgICAgPyB0aGlzLm1vZGVsQ2FsbGJhY2tzXG4gICAgICA6IHt9XG4gICAgcmV0dXJuIHRoaXMubW9kZWxDYWxsYmFja3NcbiAgfVxuICBzZXQgX21vZGVsQ2FsbGJhY2tzKG1vZGVsQ2FsbGJhY2tzKSB7XG4gICAgdGhpcy5tb2RlbENhbGxiYWNrcyA9IE1WQy5VdGlscy5hZGRQcm9wZXJ0aWVzVG9PYmplY3QoXG4gICAgICBtb2RlbENhbGxiYWNrcywgdGhpcy5fbW9kZWxDYWxsYmFja3NcbiAgICApXG4gIH1cbiAgZ2V0IF92aWV3Q2FsbGJhY2tzKCkge1xuICAgIHRoaXMudmlld0NhbGxiYWNrcyA9ICh0aGlzLnZpZXdDYWxsYmFja3MpXG4gICAgICA/IHRoaXMudmlld0NhbGxiYWNrc1xuICAgICAgOiB7fVxuICAgIHJldHVybiB0aGlzLnZpZXdDYWxsYmFja3NcbiAgfVxuICBzZXQgX3ZpZXdDYWxsYmFja3Modmlld0NhbGxiYWNrcykge1xuICAgIHRoaXMudmlld0NhbGxiYWNrcyA9IE1WQy5VdGlscy5hZGRQcm9wZXJ0aWVzVG9PYmplY3QoXG4gICAgICB2aWV3Q2FsbGJhY2tzLCB0aGlzLl92aWV3Q2FsbGJhY2tzXG4gICAgKVxuICB9XG4gIGdldCBfY29udHJvbGxlckNhbGxiYWNrcygpIHtcbiAgICB0aGlzLmNvbnRyb2xsZXJDYWxsYmFja3MgPSAodGhpcy5jb250cm9sbGVyQ2FsbGJhY2tzKVxuICAgICAgPyB0aGlzLmNvbnRyb2xsZXJDYWxsYmFja3NcbiAgICAgIDoge31cbiAgICByZXR1cm4gdGhpcy5jb250cm9sbGVyQ2FsbGJhY2tzXG4gIH1cbiAgc2V0IF9jb250cm9sbGVyQ2FsbGJhY2tzKGNvbnRyb2xsZXJDYWxsYmFja3MpIHtcbiAgICB0aGlzLmNvbnRyb2xsZXJDYWxsYmFja3MgPSBNVkMuVXRpbHMuYWRkUHJvcGVydGllc1RvT2JqZWN0KFxuICAgICAgY29udHJvbGxlckNhbGxiYWNrcywgdGhpcy5fY29udHJvbGxlckNhbGxiYWNrc1xuICAgIClcbiAgfVxuICBnZXQgX21vZGVscygpIHtcbiAgICB0aGlzLm1vZGVscyA9ICh0aGlzLm1vZGVscylcbiAgICAgID8gdGhpcy5tb2RlbHNcbiAgICAgIDoge31cbiAgICByZXR1cm4gdGhpcy5tb2RlbHNcbiAgfVxuICBzZXQgX21vZGVscyhtb2RlbHMpIHtcbiAgICB0aGlzLm1vZGVscyA9IE1WQy5VdGlscy5hZGRQcm9wZXJ0aWVzVG9PYmplY3QoXG4gICAgICBtb2RlbHMsIHRoaXMuX21vZGVsc1xuICAgIClcbiAgfVxuICBnZXQgX3ZpZXdzKCkge1xuICAgIHRoaXMudmlld3MgPSAodGhpcy52aWV3cylcbiAgICAgID8gdGhpcy52aWV3c1xuICAgICAgOiB7fVxuICAgIHJldHVybiB0aGlzLnZpZXdzXG4gIH1cbiAgc2V0IF92aWV3cyh2aWV3cykge1xuICAgIHRoaXMudmlld3MgPSBNVkMuVXRpbHMuYWRkUHJvcGVydGllc1RvT2JqZWN0KFxuICAgICAgdmlld3MsIHRoaXMuX3ZpZXdzXG4gICAgKVxuICB9XG4gIGdldCBfY29udHJvbGxlcnMoKSB7XG4gICAgdGhpcy5jb250cm9sbGVycyA9ICh0aGlzLmNvbnRyb2xsZXJzKVxuICAgICAgPyB0aGlzLmNvbnRyb2xsZXJzXG4gICAgICA6IHt9XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbGxlcnNcbiAgfVxuICBzZXQgX2NvbnRyb2xsZXJzKGNvbnRyb2xsZXJzKSB7XG4gICAgdGhpcy5jb250cm9sbGVycyA9IE1WQy5VdGlscy5hZGRQcm9wZXJ0aWVzVG9PYmplY3QoXG4gICAgICBjb250cm9sbGVycywgdGhpcy5fY29udHJvbGxlcnNcbiAgICApXG4gIH1cbiAgZ2V0IF9yb3V0ZXJzKCkge1xuICAgIHRoaXMucm91dGVycyA9ICh0aGlzLnJvdXRlcnMpXG4gICAgICA/IHRoaXMucm91dGVyc1xuICAgICAgOiB7fVxuICAgIHJldHVybiB0aGlzLnJvdXRlcnNcbiAgfVxuICBzZXQgX3JvdXRlcnMocm91dGVycykge1xuICAgIHRoaXMucm91dGVycyA9IE1WQy5VdGlscy5hZGRQcm9wZXJ0aWVzVG9PYmplY3QoXG4gICAgICByb3V0ZXJzLCB0aGlzLl9yb3V0ZXJzXG4gICAgKVxuICB9XG4gIGdldCBfcm91dGVyRXZlbnRzKCkge1xuICAgIHRoaXMucm91dGVyRXZlbnRzID0gKHRoaXMucm91dGVyRXZlbnRzKVxuICAgICAgPyB0aGlzLnJvdXRlckV2ZW50c1xuICAgICAgOiB7fVxuICAgIHJldHVybiB0aGlzLnJvdXRlckV2ZW50c1xuICB9XG4gIHNldCBfcm91dGVyRXZlbnRzKHJvdXRlckV2ZW50cykge1xuICAgIHRoaXMucm91dGVyRXZlbnRzID0gTVZDLlV0aWxzLmFkZFByb3BlcnRpZXNUb09iamVjdChcbiAgICAgIHJvdXRlckV2ZW50cywgdGhpcy5fcm91dGVyRXZlbnRzXG4gICAgKVxuICB9XG4gIGdldCBfcm91dGVyQ2FsbGJhY2tzKCkge1xuICAgIHRoaXMucm91dGVyQ2FsbGJhY2tzID0gKHRoaXMucm91dGVyQ2FsbGJhY2tzKVxuICAgICAgPyB0aGlzLnJvdXRlckNhbGxiYWNrc1xuICAgICAgOiB7fVxuICAgIHJldHVybiB0aGlzLnJvdXRlckNhbGxiYWNrc1xuICB9XG4gIHNldCBfcm91dGVyQ2FsbGJhY2tzKHJvdXRlckNhbGxiYWNrcykge1xuICAgIHRoaXMucm91dGVyQ2FsbGJhY2tzID0gTVZDLlV0aWxzLmFkZFByb3BlcnRpZXNUb09iamVjdChcbiAgICAgIHJvdXRlckNhbGxiYWNrcywgdGhpcy5fcm91dGVyQ2FsbGJhY2tzXG4gICAgKVxuICB9XG4gIGdldCBfZW1pdHRlckV2ZW50cygpIHtcbiAgICB0aGlzLmVtaXR0ZXJFdmVudHMgPSAodGhpcy5lbWl0dGVyRXZlbnRzKVxuICAgICAgPyB0aGlzLmVtaXR0ZXJFdmVudHNcbiAgICAgIDoge31cbiAgICByZXR1cm4gdGhpcy5lbWl0dGVyRXZlbnRzXG4gIH1cbiAgc2V0IF9lbWl0dGVyRXZlbnRzKGVtaXR0ZXJFdmVudHMpIHtcbiAgICB0aGlzLmVtaXR0ZXJFdmVudHMgPSBNVkMuVXRpbHMuYWRkUHJvcGVydGllc1RvT2JqZWN0KFxuICAgICAgZW1pdHRlckV2ZW50cywgdGhpcy5fZW1pdHRlckV2ZW50c1xuICAgIClcbiAgfVxuICBnZXQgX21vZGVsRXZlbnRzKCkge1xuICAgIHRoaXMubW9kZWxFdmVudHMgPSAodGhpcy5tb2RlbEV2ZW50cylcbiAgICAgID8gdGhpcy5tb2RlbEV2ZW50c1xuICAgICAgOiB7fVxuICAgIHJldHVybiB0aGlzLm1vZGVsRXZlbnRzXG4gIH1cbiAgc2V0IF9tb2RlbEV2ZW50cyhtb2RlbEV2ZW50cykge1xuICAgIHRoaXMubW9kZWxFdmVudHMgPSBNVkMuVXRpbHMuYWRkUHJvcGVydGllc1RvT2JqZWN0KFxuICAgICAgbW9kZWxFdmVudHMsIHRoaXMuX21vZGVsRXZlbnRzXG4gICAgKVxuICB9XG4gIGdldCBfdmlld0V2ZW50cygpIHtcbiAgICB0aGlzLnZpZXdFdmVudHMgPSAodGhpcy52aWV3RXZlbnRzKVxuICAgICAgPyB0aGlzLnZpZXdFdmVudHNcbiAgICAgIDoge31cbiAgICByZXR1cm4gdGhpcy52aWV3RXZlbnRzXG4gIH1cbiAgc2V0IF92aWV3RXZlbnRzKHZpZXdFdmVudHMpIHtcbiAgICB0aGlzLnZpZXdFdmVudHMgPSBNVkMuVXRpbHMuYWRkUHJvcGVydGllc1RvT2JqZWN0KFxuICAgICAgdmlld0V2ZW50cywgdGhpcy5fdmlld0V2ZW50c1xuICAgIClcbiAgfVxuICBnZXQgX2NvbnRyb2xsZXJFdmVudHMoKSB7XG4gICAgdGhpcy5jb250cm9sbGVyRXZlbnRzID0gKHRoaXMuY29udHJvbGxlckV2ZW50cylcbiAgICAgID8gdGhpcy5jb250cm9sbGVyRXZlbnRzXG4gICAgICA6IHt9XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbGxlckV2ZW50c1xuICB9XG4gIHNldCBfY29udHJvbGxlckV2ZW50cyhjb250cm9sbGVyRXZlbnRzKSB7XG4gICAgdGhpcy5jb250cm9sbGVyRXZlbnRzID0gTVZDLlV0aWxzLmFkZFByb3BlcnRpZXNUb09iamVjdChcbiAgICAgIGNvbnRyb2xsZXJFdmVudHMsIHRoaXMuX2NvbnRyb2xsZXJFdmVudHNcbiAgICApXG4gIH1cbiAgZ2V0IF9lbmFibGVkKCkgeyByZXR1cm4gdGhpcy5lbmFibGVkIHx8IGZhbHNlIH1cbiAgc2V0IF9lbmFibGVkKGVuYWJsZWQpIHsgdGhpcy5lbmFibGVkID0gZW5hYmxlZCB9XG4gIGVuYWJsZU1vZGVsRXZlbnRzKCkge1xuICAgIE1WQy5VdGlscy5iaW5kRXZlbnRzVG9UYXJnZXRPYmplY3RzKHRoaXMubW9kZWxFdmVudHMsIHRoaXMubW9kZWxzLCB0aGlzLm1vZGVsQ2FsbGJhY2tzKVxuICB9XG4gIGRpc2FibGVNb2RlbEV2ZW50cygpIHtcbiAgICBNVkMuVXRpbHMudW5iaW5kRXZlbnRzVG9UYXJnZXRPYmplY3RzKHRoaXMubW9kZWxFdmVudHMsIHRoaXMubW9kZWxzLCB0aGlzLm1vZGVsQ2FsbGJhY2tzKVxuICB9XG4gIGVuYWJsZVZpZXdFdmVudHMoKSB7XG4gICAgTVZDLlV0aWxzLmJpbmRFdmVudHNUb1RhcmdldE9iamVjdHModGhpcy52aWV3RXZlbnRzLCB0aGlzLnZpZXdzLCB0aGlzLnZpZXdDYWxsYmFja3MpXG4gIH1cbiAgZGlzYWJsZVZpZXdFdmVudHMoKSB7XG4gICAgTVZDLlV0aWxzLnVuYmluZEV2ZW50c1RvVGFyZ2V0T2JqZWN0cyh0aGlzLnZpZXdFdmVudHMsIHRoaXMudmlld3MsIHRoaXMudmlld0NhbGxiYWNrcylcbiAgfVxuICBlbmFibGVDb250cm9sbGVyRXZlbnRzKCkge1xuICAgIE1WQy5VdGlscy5iaW5kRXZlbnRzVG9UYXJnZXRPYmplY3RzKHRoaXMuY29udHJvbGxlckV2ZW50cywgdGhpcy5jb250cm9sbGVycywgdGhpcy5jb250cm9sbGVyQ2FsbGJhY2tzKVxuICB9XG4gIGRpc2FibGVDb250cm9sbGVyRXZlbnRzKCkge1xuICAgIE1WQy5VdGlscy51bmJpbmRFdmVudHNUb1RhcmdldE9iamVjdHModGhpcy5jb250cm9sbGVyRXZlbnRzLCB0aGlzLmNvbnRyb2xsZXJzLCB0aGlzLmNvbnRyb2xsZXJDYWxsYmFja3MpXG4gIH1cbiAgZW5hYmxlRW1pdHRlckV2ZW50cygpIHtcbiAgICBNVkMuVXRpbHMuYmluZEV2ZW50c1RvVGFyZ2V0T2JqZWN0cyh0aGlzLmVtaXR0ZXJFdmVudHMsIHRoaXMuZW1pdHRlcnMsIHRoaXMuZW1pdHRlckNhbGxiYWNrcylcbiAgfVxuICBkaXNhYmxlRW1pdHRlckV2ZW50cygpIHtcbiAgICBNVkMuVXRpbHMudW5iaW5kRXZlbnRzVG9UYXJnZXRPYmplY3RzKHRoaXMuZW1pdHRlckV2ZW50cywgdGhpcy5lbWl0dGVycywgdGhpcy5lbWl0dGVyQ2FsbGJhY2tzKVxuICB9XG4gIGVuYWJsZVJvdXRlckV2ZW50cygpIHtcbiAgICBNVkMuVXRpbHMuYmluZEV2ZW50c1RvVGFyZ2V0T2JqZWN0cyh0aGlzLnJvdXRlckV2ZW50cywgdGhpcy5yb3V0ZXJzLCB0aGlzLnJvdXRlckNhbGxiYWNrcylcbiAgfVxuICBkaXNhYmxlUm91dGVyRXZlbnRzKCkge1xuICAgIE1WQy5VdGlscy51bmJpbmRFdmVudHNUb1RhcmdldE9iamVjdHModGhpcy5yb3V0ZXJFdmVudHMsIHRoaXMucm91dGVycywgdGhpcy5yb3V0ZXJDYWxsYmFja3MpXG4gIH1cbiAgZW5hYmxlKCkge1xuICAgIGxldCBzZXR0aW5ncyA9IHRoaXMuc2V0dGluZ3NcbiAgICBpZihcbiAgICAgIHNldHRpbmdzICYmXG4gICAgICAhdGhpcy5lbmFibGVkXG4gICAgKSB7XG4gICAgICBpZihzZXR0aW5ncy5lbWl0dGVyQ2FsbGJhY2tzKSB0aGlzLl9lbWl0dGVyQ2FsbGJhY2tzID0gc2V0dGluZ3MuZW1pdHRlckNhbGxiYWNrc1xuICAgICAgaWYoc2V0dGluZ3MubW9kZWxDYWxsYmFja3MpIHRoaXMuX21vZGVsQ2FsbGJhY2tzID0gc2V0dGluZ3MubW9kZWxDYWxsYmFja3NcbiAgICAgIGlmKHNldHRpbmdzLnZpZXdDYWxsYmFja3MpIHRoaXMuX3ZpZXdDYWxsYmFja3MgPSBzZXR0aW5ncy52aWV3Q2FsbGJhY2tzXG4gICAgICBpZihzZXR0aW5ncy5jb250cm9sbGVyQ2FsbGJhY2tzKSB0aGlzLl9jb250cm9sbGVyQ2FsbGJhY2tzID0gc2V0dGluZ3MuY29udHJvbGxlckNhbGxiYWNrc1xuICAgICAgaWYoc2V0dGluZ3Mucm91dGVyQ2FsbGJhY2tzKSB0aGlzLl9yb3V0ZXJDYWxsYmFja3MgPSBzZXR0aW5ncy5yb3V0ZXJDYWxsYmFja3NcbiAgICAgIGlmKHNldHRpbmdzLmVtaXR0ZXJzKSB0aGlzLl9lbWl0dGVycyA9IHNldHRpbmdzLmVtaXR0ZXJzXG4gICAgICBpZihzZXR0aW5ncy5tb2RlbHMpIHRoaXMuX21vZGVscyA9IHNldHRpbmdzLm1vZGVsc1xuICAgICAgaWYoc2V0dGluZ3Mudmlld3MpIHRoaXMuX3ZpZXdzID0gc2V0dGluZ3Mudmlld3NcbiAgICAgIGlmKHNldHRpbmdzLmNvbnRyb2xsZXJzKSB0aGlzLl9jb250cm9sbGVycyA9IHNldHRpbmdzLmNvbnRyb2xsZXJzXG4gICAgICBpZihzZXR0aW5ncy5yb3V0ZXJzKSB0aGlzLl9yb3V0ZXJzID0gc2V0dGluZ3Mucm91dGVyc1xuICAgICAgaWYoc2V0dGluZ3Mucm91dGVyRXZlbnRzKSB0aGlzLl9yb3V0ZXJFdmVudHMgPSBzZXR0aW5ncy5yb3V0ZXJFdmVudHNcbiAgICAgIGlmKHNldHRpbmdzLmVtaXR0ZXJFdmVudHMpIHRoaXMuX2VtaXR0ZXJFdmVudHMgPSBzZXR0aW5ncy5lbWl0dGVyRXZlbnRzXG4gICAgICBpZihzZXR0aW5ncy5tb2RlbEV2ZW50cykgdGhpcy5fbW9kZWxFdmVudHMgPSBzZXR0aW5ncy5tb2RlbEV2ZW50c1xuICAgICAgaWYoc2V0dGluZ3Mudmlld0V2ZW50cykgdGhpcy5fdmlld0V2ZW50cyA9IHNldHRpbmdzLnZpZXdFdmVudHNcbiAgICAgIGlmKHNldHRpbmdzLmNvbnRyb2xsZXJFdmVudHMpIHRoaXMuX2NvbnRyb2xsZXJFdmVudHMgPSBzZXR0aW5ncy5jb250cm9sbGVyRXZlbnRzXG4gICAgICBpZihcbiAgICAgICAgdGhpcy5lbWl0dGVyRXZlbnRzICYmXG4gICAgICAgIHRoaXMuZW1pdHRlcnMgJiZcbiAgICAgICAgdGhpcy5lbWl0dGVyQ2FsbGJhY2tzXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5lbmFibGVFbWl0dGVyRXZlbnRzKClcbiAgICAgIH1cbiAgICAgIGlmKFxuICAgICAgICB0aGlzLnJvdXRlckV2ZW50cyAmJlxuICAgICAgICB0aGlzLnJvdXRlcnMgJiZcbiAgICAgICAgdGhpcy5yb3V0ZXJDYWxsYmFja3NcbiAgICAgICkge1xuICAgICAgICB0aGlzLmVuYWJsZVJvdXRlckV2ZW50cygpXG4gICAgICB9XG4gICAgICBpZihcbiAgICAgICAgdGhpcy5tb2RlbEV2ZW50cyAmJlxuICAgICAgICB0aGlzLm1vZGVscyAmJlxuICAgICAgICB0aGlzLm1vZGVsQ2FsbGJhY2tzXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5lbmFibGVNb2RlbEV2ZW50cygpXG4gICAgICB9XG4gICAgICBpZihcbiAgICAgICAgdGhpcy52aWV3RXZlbnRzICYmXG4gICAgICAgIHRoaXMudmlld3MgJiZcbiAgICAgICAgdGhpcy52aWV3Q2FsbGJhY2tzXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5lbmFibGVWaWV3RXZlbnRzKClcbiAgICAgIH1cbiAgICAgIGlmKFxuICAgICAgICB0aGlzLmNvbnRyb2xsZXJFdmVudHMgJiZcbiAgICAgICAgdGhpcy5jb250cm9sbGVycyAmJlxuICAgICAgICB0aGlzLmNvbnRyb2xsZXJDYWxsYmFja3NcbiAgICAgICkge1xuICAgICAgICB0aGlzLmVuYWJsZUNvbnRyb2xsZXJFdmVudHMoKVxuICAgICAgfVxuICAgICAgdGhpcy5fZW5hYmxlZCA9IHRydWVcbiAgICB9XG4gIH1cbiAgZGlzYWJsZSgpIHtcbiAgICBsZXQgc2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzXG4gICAgaWYoXG4gICAgICBzZXR0aW5ncyAmJlxuICAgICAgdGhpcy5lbmFibGVkXG4gICAgKSB7XG4gICAgICBpZihcbiAgICAgICAgdGhpcy5lbWl0dGVyRXZlbnRzICYmXG4gICAgICAgIHRoaXMuZW1pdHRlcnMgJiZcbiAgICAgICAgdGhpcy5lbWl0dGVyQ2FsbGJhY2tzXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlRW1pdHRlckV2ZW50cygpXG4gICAgICB9XG4gICAgICBpZihcbiAgICAgICAgdGhpcy5yb3V0ZXJFdmVudHMgJiZcbiAgICAgICAgdGhpcy5yb3V0ZXJzICYmXG4gICAgICAgIHRoaXMucm91dGVyQ2FsbGJhY2tzXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlUm91dGVyRXZlbnRzKClcbiAgICAgIH1cbiAgICAgIGlmKFxuICAgICAgICB0aGlzLm1vZGVsRXZlbnRzICYmXG4gICAgICAgIHRoaXMubW9kZWxzICYmXG4gICAgICAgIHRoaXMubW9kZWxDYWxsYmFja3NcbiAgICAgICkge1xuICAgICAgICB0aGlzLmRpc2FibGVNb2RlbEV2ZW50cygpXG4gICAgICB9XG4gICAgICBpZihcbiAgICAgICAgdGhpcy52aWV3RXZlbnRzICYmXG4gICAgICAgIHRoaXMudmlld3MgJiZcbiAgICAgICAgdGhpcy52aWV3Q2FsbGJhY2tzXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlVmlld0V2ZW50cygpXG4gICAgICB9XG4gICAgICBpZihcbiAgICAgICAgdGhpcy5jb250cm9sbGVyRXZlbnRzICYmXG4gICAgICAgIHRoaXMuY29udHJvbGxlcnMgJiZcbiAgICAgICAgdGhpcy5jb250cm9sbGVyQ2FsbGJhY2tzXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlQ29udHJvbGxlckV2ZW50cygpXG4gICAgICB9XG4gICAgICBkZWxldGUgdGhpcy5fZW1pdHRlcnNcbiAgICAgIGRlbGV0ZSB0aGlzLl9tb2RlbENhbGxiYWNrc1xuICAgICAgZGVsZXRlIHRoaXMuX3ZpZXdDYWxsYmFja3NcbiAgICAgIGRlbGV0ZSB0aGlzLl9jb250cm9sbGVyQ2FsbGJhY2tzXG4gICAgICBkZWxldGUgdGhpcy5fcm91dGVyQ2FsbGJhY2tzXG4gICAgICBkZWxldGUgdGhpcy5fbW9kZWxzXG4gICAgICBkZWxldGUgdGhpcy5fdmlld3NcbiAgICAgIGRlbGV0ZSB0aGlzLl9jb250cm9sbGVyc1xuICAgICAgZGVsZXRlIHRoaXMuX3JvdXRlcnNcbiAgICAgIGRlbGV0ZSB0aGlzLl9tb2RlbEV2ZW50c1xuICAgICAgZGVsZXRlIHRoaXMuX3ZpZXdFdmVudHNcbiAgICAgIGRlbGV0ZSB0aGlzLl9jb250cm9sbGVyRXZlbnRzXG4gICAgICB0aGlzLl9lbmFibGVkID0gZmFsc2VcbiAgICB9XG4gIH1cbn1cbiIsIk1WQy5Sb3V0ZXIgPSBjbGFzcyBleHRlbmRzIE1WQy5CYXNlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKVxuICB9XG4gIGdldCByb3V0ZSgpIHtcbiAgICBpZih0aGlzLl9oYXNoKSB7XG4gICAgICByZXR1cm4gU3RyaW5nKHdpbmRvdy5sb2NhdGlvbi5oYXNoKS5zcGxpdCgnIycpLnBvcCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBTdHJpbmcod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKVxuICAgIH1cbiAgfVxuICBnZXQgX2hhc2goKSB7IHJldHVybiB0aGlzLmhhc2ggfVxuICBzZXQgX2hhc2goaGFzaCkgeyB0aGlzLmhhc2ggPSBoYXNoIH1cbiAgZ2V0IF9lbmFibGVkKCkgeyByZXR1cm4gdGhpcy5lbmFibGVkIHx8IGZhbHNlIH1cbiAgc2V0IF9lbmFibGVkKGVuYWJsZWQpIHsgdGhpcy5lbmFibGVkID0gZW5hYmxlZCB9XG4gIGdldCBfcm91dGVzKCkge1xuICAgIHRoaXMucm91dGVzID0gKHRoaXMucm91dGVzKVxuICAgICAgPyB0aGlzLnJvdXRlc1xuICAgICAgOiB7fVxuICAgIHJldHVybiB0aGlzLnJvdXRlc1xuICB9XG4gIHNldCBfcm91dGVzKHJvdXRlcykge1xuICAgIHRoaXMucm91dGVzID0gTVZDLlV0aWxzLmFkZFByb3BlcnRpZXNUb09iamVjdChcbiAgICAgIHJvdXRlcywgdGhpcy5fcm91dGVzXG4gICAgKVxuICB9XG4gIGdldCBfY29udHJvbGxlcigpIHsgcmV0dXJuIHRoaXMuY29udHJvbGxlciB9XG4gIHNldCBfY29udHJvbGxlcihjb250cm9sbGVyKSB7IHRoaXMuY29udHJvbGxlciA9IGNvbnRyb2xsZXIgfVxuICBnZXQgX3ByZXZpb3VzVVJMKCkgeyByZXR1cm4gdGhpcy5wcmV2aW91c1VSTCB9XG4gIHNldCBfcHJldmlvdXNVUkwocHJldmlvdXNVUkwpIHsgdGhpcy5wcmV2aW91c1VSTCA9IHByZXZpb3VzVVJMIH1cbiAgZ2V0IF9jdXJyZW50VVJMKCkgeyByZXR1cm4gdGhpcy5jdXJyZW50VVJMIH1cbiAgc2V0IF9jdXJyZW50VVJMKGN1cnJlbnRVUkwpIHsgdGhpcy5jdXJyZW50VVJMID0gY3VycmVudFVSTCB9XG4gIGdldCBmcmFnbWVudElEUmVnRXhwKCkgeyByZXR1cm4gbmV3IFJlZ0V4cCgvXihbMC05QS1aXFw/XFw9XFwsXFwuXFwqXFwtXFxfXFwnXFxcIlxcXlxcJVxcJFxcI1xcQFxcIVxcflxcKFxcKVxce1xcfVxcJlxcPFxcPlxcXFxcXC9dKSokLywgJ2dpJykgfVxuICBmcmFnbWVudE5hbWVSZWdFeHAoZnJhZ21lbnQpIHsgcmV0dXJuIG5ldyBSZWdFeHAoJ14nLmNvbmNhdChmcmFnbWVudCwgJyQnKSkgfVxuICBlbmFibGUoKSB7XG4gICAgbGV0IHNldHRpbmdzID0gdGhpcy5zZXR0aW5nc1xuICAgIGlmKFxuICAgICAgc2V0dGluZ3MgJiZcbiAgICAgICF0aGlzLmVuYWJsZWRcbiAgICApIHtcbiAgICAgIHRoaXMuX2hhc2ggPSAodHlwZW9mIHRoaXMuc2V0dGluZ3MuaGFzaCA9PT0gJ2Jvb2xlYW4nKVxuICAgICAgICA/IHRoaXMuc2V0dGluZ3MuaGFzaFxuICAgICAgICA6IHRydWVcbiAgICAgIHRoaXMuZW5hYmxlRW1pdHRlcnMoKVxuICAgICAgdGhpcy5lbmFibGVFdmVudHMoKVxuICAgICAgdGhpcy5lbmFibGVSb3V0ZXMoKVxuICAgICAgdGhpcy5yb3V0ZUNoYW5nZSgpXG4gICAgICB0aGlzLl9lbmFibGVkID0gdHJ1ZVxuICAgIH1cbiAgfVxuICBkaXNhYmxlKCkge1xuICAgIGxldCBzZXR0aW5ncyA9IHRoaXMuc2V0dGluZ3NcbiAgICBpZihcbiAgICAgIHNldHRpbmdzICYmXG4gICAgICB0aGlzLmVuYWJsZWRcbiAgICApIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9oYXNoXG4gICAgICB0aGlzLmRpc2FibGVFdmVudHMoKVxuICAgICAgdGhpcy5kaXNhYmxlUm91dGVzKClcbiAgICAgIHRoaXMuZGlzYWJsZUVtaXR0ZXJzKClcbiAgICAgIHRoaXMuX2VuYWJsZWQgPSBmYWxzZVxuICAgIH1cbiAgfVxuICBlbmFibGVSb3V0ZXMoKSB7XG4gICAgaWYodGhpcy5zZXR0aW5ncy5jb250cm9sbGVyKSB0aGlzLl9jb250cm9sbGVyID0gdGhpcy5zZXR0aW5ncy5jb250cm9sbGVyXG4gICAgdGhpcy5fcm91dGVzID0gT2JqZWN0LmVudHJpZXModGhpcy5zZXR0aW5ncy5yb3V0ZXMpLnJlZHVjZShcbiAgICAgIChcbiAgICAgICAgX3JvdXRlcyxcbiAgICAgICAgW3JvdXRlUGF0aCwgcm91dGVDYWxsYmFja10sXG4gICAgICAgIHJvdXRlSW5kZXgsXG4gICAgICAgIG9yaWdpbmFsUm91dGVzLFxuICAgICAgKSA9PiB7XG4gICAgICAgIF9yb3V0ZXNbcm91dGVQYXRoXSA9IHRoaXMuY29udHJvbGxlcltyb3V0ZUNhbGxiYWNrXVxuICAgICAgICByZXR1cm4gX3JvdXRlc1xuICAgICAgfSxcbiAgICAgIHt9XG4gICAgKVxuICAgIHJldHVyblxuICB9XG4gIGVuYWJsZUVtaXR0ZXJzKCkge1xuICAgIHRoaXMuX2VtaXR0ZXJzID0ge1xuICAgICAgbmF2aWdhdGVFbWl0dGVyOiBuZXcgTVZDLkVtaXR0ZXJzLk5hdmlnYXRlRW1pdHRlcigpLFxuICAgIH1cbiAgfVxuICBkaXNhYmxlRW1pdHRlcnMoKSB7XG4gICAgZGVsZXRlIHRoaXMuX2VtaXR0ZXJzLm5hdmlnYXRlRW1pdHRlclxuICB9XG4gIGRpc2FibGVSb3V0ZXMoKSB7XG4gICAgZGVsZXRlIHRoaXMuX3JvdXRlc1xuICAgIGRlbGV0ZSB0aGlzLl9jb250cm9sbGVyXG4gIH1cbiAgZW5hYmxlRXZlbnRzKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5yb3V0ZUNoYW5nZS5iaW5kKHRoaXMpKVxuICB9XG4gIGRpc2FibGVFdmVudHMoKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLnJvdXRlQ2hhbmdlLmJpbmQodGhpcykpXG4gIH1cbiAgcm91dGVDaGFuZ2UoKSB7XG4gICAgbGV0IHJvdXRlID0gdGhpcy5yb3V0ZS5zcGxpdCgnLycpLmZpbHRlcigoZnJhZ21lbnQpID0+IGZyYWdtZW50Lmxlbmd0aClcbiAgICByb3V0ZSA9IChyb3V0ZS5sZW5ndGgpXG4gICAgICA/IHJvdXRlXG4gICAgICA6IFsnLyddXG4gICAgbGV0IHJvdXRlQ29udHJvbGxlckRhdGEgPSBPYmplY3QuZW50cmllcyh0aGlzLnJvdXRlcylcbiAgICAgIC5maWx0ZXIoKFtyb3V0ZXJQYXRoLCByb3V0ZXJDb250cm9sbGVyXSkgPT4ge1xuICAgICAgICByb3V0ZXJQYXRoID0gcm91dGVyUGF0aC5zcGxpdCgnLycpLmZpbHRlcigoZnJhZ21lbnQpID0+IGZyYWdtZW50Lmxlbmd0aClcbiAgICAgICAgcm91dGVyUGF0aCA9IChyb3V0ZXJQYXRoLmxlbmd0aClcbiAgICAgICAgICA/IHJvdXRlclBhdGhcbiAgICAgICAgICA6IFsnLyddXG4gICAgICAgIGlmKFxuICAgICAgICAgIHJvdXRlLmxlbmd0aCAmJlxuICAgICAgICAgIHJvdXRlLmxlbmd0aCA9PT0gcm91dGVyUGF0aC5sZW5ndGhcbiAgICAgICAgKSB7XG4gICAgICAgICAgbGV0IG1hdGNoXG4gICAgICAgICAgcmV0dXJuIHJvdXRlclBhdGguZmlsdGVyKChmcmFnbWVudCwgZnJhZ21lbnRJbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYoXG4gICAgICAgICAgICAgIG1hdGNoID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgbWF0Y2ggPT09IHRydWVcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBpZihmcmFnbWVudFswXSA9PT0gJzonKSB7XG4gICAgICAgICAgICAgICAgZnJhZ21lbnQgPSB0aGlzLmZyYWdtZW50SURSZWdFeHBcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmcmFnbWVudCA9IGZyYWdtZW50LnJlcGxhY2UobmV3IFJlZ0V4cCgnLycsICdnaScpLCAnXFxcXFxcLycpXG4gICAgICAgICAgICAgICAgZnJhZ21lbnQgPSB0aGlzLmZyYWdtZW50TmFtZVJlZ0V4cChmcmFnbWVudClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBtYXRjaCA9IGZyYWdtZW50LnRlc3Qocm91dGVbZnJhZ21lbnRJbmRleF0pXG4gICAgICAgICAgICAgIGlmKFxuICAgICAgICAgICAgICAgIG1hdGNoID09PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgZnJhZ21lbnRJbmRleCA9PT0gcm91dGUubGVuZ3RoIC0gMVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcm91dGVyQ29udHJvbGxlclxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlbMF1cbiAgICAgICAgfVxuICAgICAgfSlbMF1cbiAgICB0cnkge1xuICAgICAgaWYodGhpcy5jdXJyZW50VVJMKSB0aGlzLl9wcmV2aW91c1VSTCA9IHRoaXMuY3VycmVudFVSTFxuICAgICAgdGhpcy5fY3VycmVudFVSTCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmXG4gICAgICBsZXQgcm91dGVDb250cm9sbGVyTmFtZSA9IHJvdXRlQ29udHJvbGxlckRhdGFbMF1cbiAgICAgIGxldCByb3V0ZUNvbnRyb2xsZXIgPSByb3V0ZUNvbnRyb2xsZXJEYXRhWzFdXG4gICAgICBsZXQgbmF2aWdhdGVFbWl0dGVyID0gdGhpcy5lbWl0dGVycy5uYXZpZ2F0ZUVtaXR0ZXJcbiAgICAgIGxldCBuYXZpZ2F0ZUVtaXR0ZXJEYXRhID0ge1xuICAgICAgICBjdXJyZW50VVJMOiB0aGlzLmN1cnJlbnRVUkwsXG4gICAgICAgIHByZXZpb3VzVVJMOiB0aGlzLnByZXZpb3VzVVJMLFxuICAgICAgICBjdXJyZW50Um91dGU6IHRoaXMucm91dGUsXG4gICAgICAgIGN1cnJlbnRDb250cm9sbGVyOiByb3V0ZUNvbnRyb2xsZXIubmFtZVxuICAgICAgfVxuICAgICAgbmF2aWdhdGVFbWl0dGVyLnNldChuYXZpZ2F0ZUVtaXR0ZXJEYXRhKVxuICAgICAgdGhpcy5lbWl0KFxuICAgICAgICBuYXZpZ2F0ZUVtaXR0ZXIubmFtZSxcbiAgICAgICAgbmF2aWdhdGVFbWl0dGVyLmVtaXNzaW9uKClcbiAgICAgIClcbiAgICAgIHJvdXRlQ29udHJvbGxlcihuYXZpZ2F0ZUVtaXR0ZXIuZW1pc3Npb24oKSlcbiAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICB0aHJvdyAnUm91dGUgRGVmaW5pdGlvbiBFcnJvcidcbiAgICB9XG4gIH1cbiAgbmF2aWdhdGUocGF0aCkge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gcGF0aFxuICB9XG59XG4iXSwiZmlsZSI6ImJyb3dzZXIvbXZjLWZyYW1ld29yay1taW4uanMifQ==
